{
  "version": 3,
  "sources": ["../src/main.ts"],
  "sourcesContent": ["/*\r\n * Created with @iobroker/create-adapter v2.0.1\r\n */\r\n\r\n// The adapter-core module gives you access to the core ioBroker functions\r\n// you need to create an adapter\r\nimport * as utils from '@iobroker/adapter-core';\r\nimport axios from 'axios';\r\nimport sourceMapSupport from 'source-map-support';\r\nimport { CreateJsonTable } from './lib/interface/CreateJsonTable';\r\nimport { Result } from './lib/interface/resultInterface';\r\n// Load your modules here, e.g.:\r\nimport { cheapestObj, priceMinMaxObj, priceObj, statesObj } from './lib/object_definition';\r\n\r\nsourceMapSupport.install();\r\n\r\n// Global variables here\r\nconst pattern = /[0-9|a-z]{8}\\-[0-9|a-z]{4}\\-[0-9|a-z]{4}\\-[0-9|a-z]{4}\\-[0-9|a-z]{12}/g;\r\n\r\nclass Tankerkoenig extends utils.Adapter {\r\n\tprivate readonly fuelTypes: string[];\r\n\tprivate sync_milliseconds: number;\r\n\tprivate refreshStatus: boolean;\r\n\tprivate requestTimeout: NodeJS.Timeout | null;\r\n\tprivate refreshTimeout: NodeJS.Timeout | null;\r\n\tprivate refreshStatusTimeout: NodeJS.Timeout | null;\r\n\tprivate startRequestTimeout: NodeJS.Timeout | null;\r\n\tpublic constructor(options: Partial<utils.AdapterOptions> = {}) {\r\n\t\tsuper({\r\n\t\t\t...options,\r\n\t\t\tname: 'tankerkoenig',\r\n\t\t});\r\n\t\tthis.on('ready', this.onReady.bind(this));\r\n\t\tthis.on('stateChange', this.onStateChange.bind(this));\r\n\t\tthis.on('unload', this.onUnload.bind(this));\r\n\t\tthis.on('message', this.onMessage.bind(this));\r\n\r\n\t\t// -----------------  Timeout variables -----------------\r\n\t\tthis.startRequestTimeout = null;\r\n\t\tthis.requestTimeout = null;\r\n\t\tthis.refreshTimeout = null;\r\n\t\tthis.refreshStatusTimeout = null;\r\n\r\n\t\t// -----------------  Global variables -----------------\r\n\t\tthis.fuelTypes = ['e5', 'e10', 'diesel'];\r\n\t\tthis.sync_milliseconds = 10 * 60 * 1000; // 10min\r\n\t\tthis.refreshStatus = false;\r\n\t}\r\n\r\n\t/**\r\n\t * @description Is called when databases are connected and adapter received configuration.\r\n\t */\r\n\tprivate async onReady(): Promise<void> {\r\n\t\ttry {\r\n\t\t\t// Initialize your adapter here\r\n\t\t\t// check if the adapter is running in daemon mode\r\n\t\t\tconst adapterObj: ioBroker.Object | null | undefined = await this.getForeignObjectAsync(\r\n\t\t\t\t`system.adapter.${this.namespace}`,\r\n\t\t\t);\r\n\r\n\t\t\tif (adapterObj) {\r\n\t\t\t\tif (adapterObj.common.mode !== 'daemon') {\r\n\t\t\t\t\tadapterObj.common.mode = 'daemon';\r\n\t\t\t\t\tawait this.setForeignObjectAsync(adapterObj._id, adapterObj);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.writeLog('Adapter is already in daemon mode', 'info');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// check if the sync time is a number, if not, the string is parsed to a number\r\n\t\t\tthis.sync_milliseconds =\r\n\t\t\t\ttypeof this.config.synctime === 'number'\r\n\t\t\t\t\t? this.config.synctime * 1000 * 60\r\n\t\t\t\t\t: parseInt(this.config.synctime, 10) * 1000 * 60;\r\n\r\n\t\t\tif (isNaN(this.sync_milliseconds) || this.sync_milliseconds < 10 * 60 * 1000) {\r\n\t\t\t\t// if the sync time is less than 10 minutes, the sync time is set to 10 minutes\r\n\t\t\t\tthis.sync_milliseconds = 10 * 60 * 1000;\r\n\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t`Sync time was too short (${this.config.synctime}). New sync time is 10 min`,\r\n\t\t\t\t\t'warn',\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tthis.writeLog(\r\n\t\t\t\t`Sync time set to ${this.sync_milliseconds / 1000 / 60} minutes or ${\r\n\t\t\t\t\tthis.sync_milliseconds\r\n\t\t\t\t} ms`,\r\n\t\t\t\t'info',\r\n\t\t\t);\r\n\r\n\t\t\t// TODO: remove once all users are on the new version\r\n\t\t\t// check if the api key is encrypted\r\n\t\t\tif (this.config.apikey && this.config.apikey.match(pattern)) {\r\n\t\t\t\t// if the api key is not encrypted, it is encrypted\r\n\t\t\t\tthis.writeLog('API key is not encrypted. Encrypting API key', 'info');\r\n\t\t\t\tthis.config.apikey = this.encrypt(this.config.apikey);\r\n\t\t\t\t// write in the encrypted api key in the config\r\n\t\t\t\tconst obj = await this.getForeignObjectAsync(`system.adapter.${this.namespace}`);\r\n\t\t\t\tif (obj) {\r\n\t\t\t\t\tobj.native.apikey = this.config.apikey;\r\n\t\t\t\t\tawait this.setForeignObjectAsync(`system.adapter.${this.namespace}`, obj);\r\n\t\t\t\t\tthis.writeLog('API key encrypted', 'info');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// check if all address data is available in this.config.stations\r\n\t\t\tif (this.config.station) {\r\n\t\t\t\tfor (const stations of this.config.station) {\r\n\t\t\t\t\t// check if city is available in stations\r\n\t\t\t\t\tif (!stations.city) {\r\n\t\t\t\t\t\t// if city is not present, city is set to an empty string\r\n\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t`City is missing in config from station ${stations.stationname}. Please check your configuration or reconfigure the stations => edit station => save`,\r\n\t\t\t\t\t\t\t'warn',\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tstations.city = '';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// check the type of city\r\n\t\t\t\t\t\tconst cityType = typeof stations.city;\r\n\t\t\t\t\t\tif (cityType !== 'string') {\r\n\t\t\t\t\t\t\t// if city is not of type string, an warn message is issued and city is converted to an empty string\r\n\t\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t\t`City type is ${cityType} in config from station ${stations.stationname} must be have type string. Please check your configuration or reconfigure the stations => edit station => save`,\r\n\t\t\t\t\t\t\t\t'warn',\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tstations.city = '';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// check if street is available in stations\r\n\t\t\t\t\tif (!stations.street) {\r\n\t\t\t\t\t\t// if street is not present, street is set to an empty string\r\n\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t`Street is missing in config from station ${stations.stationname}. Please check your configuration or reconfigure the stations => edit station => save`,\r\n\t\t\t\t\t\t\t'warn',\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tstations.street = '';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// check the type of street\r\n\t\t\t\t\t\tconst streetType = typeof stations.street;\r\n\t\t\t\t\t\tif (streetType !== 'string') {\r\n\t\t\t\t\t\t\t// if street is not of type string, an warn message is issued and street is converted to an empty string\r\n\t\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t\t`Street type is ${streetType} in config from station ${stations.stationname} must be have type string. Please check your configuration or reconfigure the stations => edit station => save`,\r\n\t\t\t\t\t\t\t\t'warn',\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tstations.street = '';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// check if houseNumber is available in stations\r\n\t\t\t\t\tif (!stations.houseNumber) {\r\n\t\t\t\t\t\t// if houseNumber is not present, houseNumber is set to an empty string\r\n\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t`House number is missing in config from station ${stations.stationname}. Please check your configuration or reconfigure the stations => edit station => save`,\r\n\t\t\t\t\t\t\t'warn',\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tstations.houseNumber = ' ';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// check the type of houseNumber\r\n\t\t\t\t\t\tconst houseNumberType = typeof stations.houseNumber;\r\n\t\t\t\t\t\tif (houseNumberType !== 'string') {\r\n\t\t\t\t\t\t\t// if houseNumber is not of type string, an warn message is issued and houseNumber is converted to an empty string\r\n\t\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t\t`House number type is ${houseNumberType} in config from station ${stations.stationname} must be have type string. Please check your configuration or reconfigure the stations => edit station => save`,\r\n\t\t\t\t\t\t\t\t'warn',\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tstations.houseNumber = ' ';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// check if postCode  is available in stations\r\n\t\t\t\t\tif (!stations.postCode) {\r\n\t\t\t\t\t\t// if postCode is not present, postCode is set to 0\r\n\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t`Post code is missing in config from station ${stations.stationname}. Please check your configuration or reconfigure the stations => edit station => save`,\r\n\t\t\t\t\t\t\t'warn',\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tstations.postCode = ' ';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// check the type of postCode\r\n\t\t\t\t\t\tconst postCodeType = typeof stations.postCode;\r\n\t\t\t\t\t\tif (postCodeType !== 'string') {\r\n\t\t\t\t\t\t\t// if postCode is not of type string, an warn message is issued and postCode is converted to string\r\n\t\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t\t`Post code type is ${postCodeType} in config from station ${stations.stationname} must be have type string. Please check your configuration or reconfigure the stations => edit station => save`,\r\n\t\t\t\t\t\t\t\t'warn',\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tstations.postCode = stations.postCode.toString();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// check if latitude is available in stations\r\n\t\t\t\t\tif (!stations.latitude) {\r\n\t\t\t\t\t\t// if latitude is not present, latitude is set to 0\r\n\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t`Latitude is missing in config from station ${stations.stationname}. Please check your configuration or reconfigure the stations => edit station => save`,\r\n\t\t\t\t\t\t\t'warn',\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tstations.latitude = 0;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// check the type of latitude\r\n\t\t\t\t\t\tconst latitudeType = typeof stations.latitude;\r\n\t\t\t\t\t\tif (latitudeType !== 'number') {\r\n\t\t\t\t\t\t\t// if latitude is not of type number, an warn message is issued and latitude is converted to 0\r\n\t\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t\t`Latitude type is ${latitudeType} in config from station ${stations.stationname} must be have type number. Please check your configuration or reconfigure the stations => edit station => save`,\r\n\t\t\t\t\t\t\t\t'warn',\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tstations.latitude = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// check if longitude is available in stations\r\n\t\t\t\t\tif (!stations.longitude) {\r\n\t\t\t\t\t\t// if longitude is not present, longitude is set to 0\r\n\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t`Longitude is missing in config from station ${stations.stationname}. Please check your configuration or reconfigure the stations => edit station => save`,\r\n\t\t\t\t\t\t\t'warn',\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tstations.longitude = 0;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// check the type of longitude\r\n\t\t\t\t\t\tconst longitudeType = typeof stations.longitude;\r\n\t\t\t\t\t\tif (longitudeType !== 'number') {\r\n\t\t\t\t\t\t\t// if longitude is not of type number, an warn message is issued and longitude is converted to 0\r\n\t\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t\t`Longitude type is ${longitudeType} in config from station ${stations.stationname} must be have type number. Please check your configuration or reconfigure the stations => edit station => save`,\r\n\t\t\t\t\t\t\t\t'warn',\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tstations.longitude = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// check if openingTimes is available in stations\r\n\t\t\t\t\tif (!stations.openingTimes) {\r\n\t\t\t\t\t\t// if openingTimes is not present, openingTimes is set to an empty string\r\n\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t`Opening times is missing in config from station ${stations.stationname}. Please check your configuration or reconfigure the stations => edit station => save`,\r\n\t\t\t\t\t\t\t'warn',\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tstations.openingTimes = 'no Data';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// check the type of openingTimes object or string\r\n\t\t\t\t\t\tconst openingTimesType = typeof stations.openingTimes;\r\n\t\t\t\t\t\tif (openingTimesType !== 'object' && openingTimesType !== 'string') {\r\n\t\t\t\t\t\t\t// if openingTimes is not of type object / string, an warn message is issued and openingTimes is converted to an 'no Data' string\r\n\t\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t\t`Opening times type is ${openingTimesType} in config from station ${stations.stationname} must be have type string. Please check your configuration or reconfigure the stations => edit station => save`,\r\n\t\t\t\t\t\t\t\t'warn',\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tstations.openingTimes = 'no Data';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// check if overrides is available in stations\r\n\t\t\t\t\tif (!stations.overrides) {\r\n\t\t\t\t\t\t// if overrides is not present, overrides is set to an empty array\r\n\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t`Overrides is missing in config from station ${stations.stationname}. Please check your configuration or reconfigure the stations => edit station => save`,\r\n\t\t\t\t\t\t\t'warn',\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tstations.overrides = 'no Data';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// check the type of overrides object or string\r\n\t\t\t\t\t\tconst overridesType = typeof stations.overrides;\r\n\t\t\t\t\t\tif (overridesType !== 'object' && overridesType !== 'string') {\r\n\t\t\t\t\t\t\t// if overrides is not of type object, an warn message is issued and overrides is converted to an 'no Data' string\r\n\t\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t\t`Overrides type is ${overridesType} in config from station ${stations.stationname} must be have type object. Please check your configuration or reconfigure the stations => edit station => save`,\r\n\t\t\t\t\t\t\t\t'warn',\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tstations.overrides = 'no Data';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// add to sync_milliseconds a random seconds value between 0 and 59\r\n\t\t\tthis.sync_milliseconds += Math.floor(Math.random() * 60) * 1000;\r\n\t\t\tif (this.decrypt(this.config.apikey).length === 36) {\r\n\t\t\t\tif (this.config.station.length > 0) {\r\n\t\t\t\t\tif (this.startRequestTimeout) clearTimeout(this.startRequestTimeout);\r\n\t\t\t\t\tawait this.createAllStates(this.config.station);\r\n\t\t\t\t\t// wait 1 second to avoid that the first request is sent before the states are created\r\n\t\t\t\t\tthis.startRequestTimeout = setTimeout(async () => {\r\n\t\t\t\t\t\tthis.writeLog('Start first request', 'info');\r\n\t\t\t\t\t\tawait this.requestData();\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.writeLog(`No stations defined`, 'error');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.writeLog(`No Api Key is specified`, 'error');\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tthis.writeLog(\r\n\t\t\t\t`[ Adapter V:${this.version} onReady ] error: ${error} stack: ${error.stack}`,\r\n\t\t\t\t'error',\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description request data from tankerkoenig\r\n\t */\r\n\tprivate async requestData(): Promise<any> {\r\n\t\ttry {\r\n\t\t\tif (this.requestTimeout) clearTimeout(this.requestTimeout);\r\n\t\t\tthis.writeLog(`request start now}`, 'debug');\r\n\r\n\t\t\t// create the url for the request\r\n\t\t\tconst url = `https://creativecommons.tankerkoenig.de/json/prices.php?ids=${this.config.station\r\n\t\t\t\t.map((station) => station.station)\r\n\t\t\t\t.join(',')}&apikey=${this.decrypt(this.config.apikey)}`;\r\n\t\t\tthis.writeLog(`request url: ${url}`, 'debug');\r\n\t\t\tconst config = {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'User-Agent': `${this.name}/${this.version}`,\r\n\t\t\t\t\tAccept: 'application/json',\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t\t// request data from tankerkoenig\r\n\t\t\tconst response = await axios.get(url, config);\r\n\t\t\t// const response = dummyData;\r\n\r\n\t\t\tconsole.log(\r\n\t\t\t\t`[ Adapter V:${this.version} requestData axios: ${axios.VERSION} ] response data:`,\r\n\t\t\t\tresponse,\r\n\t\t\t);\r\n\t\t\tif (response.status === 200) {\r\n\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t`[ Adapter V:${this.version} requestData axios: ${\r\n\t\t\t\t\t\taxios.VERSION\r\n\t\t\t\t\t} ] response data: ${JSON.stringify(response.data)}`,\r\n\t\t\t\t\t'debug',\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// check if the response is ok\r\n\t\t\t\tif (response.data.ok) {\r\n\t\t\t\t\t// write the data to the json state\r\n\t\t\t\t\tawait this.setStateAsync('stations.json', {\r\n\t\t\t\t\t\tval: JSON.stringify(response.data),\r\n\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// add discount to the price\r\n\t\t\t\t\tconst price = await this.setDiscount(response.data.prices);\r\n\t\t\t\t\t// write all data to the states\r\n\t\t\t\t\tawait this.writeState(price);\r\n\r\n\t\t\t\t\tif (this.refreshStatusTimeout) clearTimeout(this.refreshStatusTimeout);\r\n\t\t\t\t\tthis.refreshStatusTimeout = setTimeout(async () => {\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.adapterStatus`, {\r\n\t\t\t\t\t\t\tval: 'idle',\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}, 2_000);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t`[ Adapter V:${this.version} requestData  axios: ${axios.VERSION} ] response not ok`,\r\n\t\t\t\t\t\t'error',\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t`[ Adapter V:${this.version} requestData  axios: ${\r\n\t\t\t\t\t\t\taxios.VERSION\r\n\t\t\t\t\t\t} ] response data: ${JSON.stringify(response.data)}`,\r\n\t\t\t\t\t\t'error',\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (response.data.message === 'parameter error') {\r\n\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t`[ Adapter V:${this.version} requestData  axios: ${axios.VERSION} ] all parameters that have been sent: ${url}`,\r\n\t\t\t\t\t\t\t'error',\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t`[ Adapter V:${this.version} requestData  axios: ${\r\n\t\t\t\t\t\taxios.VERSION\r\n\t\t\t\t\t} ] response status code ${response.status} status text: ${\r\n\t\t\t\t\t\tresponse.statusText\r\n\t\t\t\t\t} data: ${JSON.stringify(response.data)}`,\r\n\t\t\t\t\t'error',\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tawait this.setStateAsync(`stations.lastUpdate`, { val: Date.now(), ack: true });\r\n\t\t\tthis.writeLog(`last update: ${new Date().toString()}`, 'debug');\r\n\r\n\t\t\t// start the timer for the next request\r\n\t\t\tthis.requestTimeout = setTimeout(async () => {\r\n\t\t\t\tthis.writeLog(`request timeout start new request`, 'debug');\r\n\t\t\t\tawait this.setStateAsync(`stations.adapterStatus`, {\r\n\t\t\t\t\tval: 'automatic request',\r\n\t\t\t\t\tack: true,\r\n\t\t\t\t});\r\n\t\t\t\tawait this.requestData();\r\n\t\t\t}, this.sync_milliseconds);\r\n\t\t} catch (error) {\r\n\t\t\tif (error.response) {\r\n\t\t\t\tif (error.response.status === 503) {\r\n\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t`[ requestDetails axios: ${axios.VERSION} ] Code: ${\r\n\t\t\t\t\t\t\terror.response.status\r\n\t\t\t\t\t\t} Message: >> ${\r\n\t\t\t\t\t\t\terror.response.statusText\r\n\t\t\t\t\t\t} Rate Limit Exceeded << Data: ${JSON.stringify(error.response.data)}`,\r\n\t\t\t\t\t\t'error',\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t`[ Adapter V:${this.version} requestData axios: ${\r\n\t\t\t\t\t\t\taxios.VERSION\r\n\t\t\t\t\t\t} ] error.response: Code: ${error.response.status}  Message: ${\r\n\t\t\t\t\t\t\terror.response.statusText\r\n\t\t\t\t\t\t} Data: ${JSON.stringify(error.response.data)} `,\r\n\t\t\t\t\t\t'error',\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t`[ Adapter V:${this.version} requestData axios: ${axios.VERSION} ] Error: ${error} Error Code ${error.code} Error Message ${error.message} >>> Stack: ${error.stack}`,\r\n\t\t\t\t\t'error',\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\t// set the adapter status to error\r\n\t\t\tawait this.setStateAsync(`stations.adapterStatus`, {\r\n\t\t\t\tval: 'request Error',\r\n\t\t\t\tack: true,\r\n\t\t\t});\r\n\r\n\t\t\t// start the timer for the next request\r\n\t\t\tthis.requestTimeout = setTimeout(async () => {\r\n\t\t\t\tthis.writeLog(`request timeout start new request`, 'debug');\r\n\t\t\t\tawait this.setStateAsync(`stations.adapterStatus`, {\r\n\t\t\t\t\tval: 'automatic request',\r\n\t\t\t\t\tack: true,\r\n\t\t\t\t});\r\n\t\t\t\tawait this.requestData();\r\n\t\t\t}, this.sync_milliseconds);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description set the discount to the price if it is configured\r\n\t */\r\n\tprivate async setDiscount(price: Result): Promise<Result> {\r\n\t\ttry {\r\n\t\t\tconst station = this.config.station;\r\n\t\t\tfor (const stationValue of station) {\r\n\t\t\t\tfor (const [stationID, pricesValue] of Object.entries(price)) {\r\n\t\t\t\t\tif (stationID === stationValue.station) {\r\n\t\t\t\t\t\tif (stationValue.discounted) {\r\n\t\t\t\t\t\t\tstationValue.discountObj.fuelType.map(async (fuelType) => {\r\n\t\t\t\t\t\t\t\tfor (const [key, priceValue] of Object.entries(pricesValue)) {\r\n\t\t\t\t\t\t\t\t\tif (fuelType === key) {\r\n\t\t\t\t\t\t\t\t\t\tif (stationValue.discountObj.discountType === 'absolute') {\r\n\t\t\t\t\t\t\t\t\t\t\tpricesValue[fuelType] = await this.addDiscount(\r\n\t\t\t\t\t\t\t\t\t\t\t\tpriceValue,\r\n\t\t\t\t\t\t\t\t\t\t\t\tstationValue.discountObj.discount,\r\n\t\t\t\t\t\t\t\t\t\t\t\tstationValue.discountObj.discountType,\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t} else if (stationValue.discountObj.discountType === 'percent') {\r\n\t\t\t\t\t\t\t\t\t\t\tpricesValue[fuelType] = await this.addDiscount(\r\n\t\t\t\t\t\t\t\t\t\t\t\tpriceValue,\r\n\t\t\t\t\t\t\t\t\t\t\t\tstationValue.discountObj.discount,\r\n\t\t\t\t\t\t\t\t\t\t\t\tstationValue.discountObj.discountType,\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// return the prices with the discount\r\n\t\t\treturn price;\r\n\t\t} catch (error) {\r\n\t\t\tthis.writeLog(\r\n\t\t\t\t`[ Adapter V:${this.version} setDiscount ] error: ${error} stack: ${error.stack}`,\r\n\t\t\t\t'error',\r\n\t\t\t);\r\n\t\t\treturn price;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description request old state\r\n\t */\r\n\tprivate async oldState(id: string): Promise<any> {\r\n\t\ttry {\r\n\t\t\tconst oldState = await this.getStateAsync(id);\r\n\t\t\treturn oldState ? oldState.val : null;\r\n\t\t} catch (error) {\r\n\t\t\tthis.writeLog(\r\n\t\t\t\t`[ Adapter V:${this.version} oldState ] error: ${error} stack: ${error.stack}`,\r\n\t\t\t\t'error',\r\n\t\t\t);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description request day of state\r\n\t */\r\n\tprivate async dayState(id: string): Promise<any> {\r\n\t\ttry {\r\n\t\t\tconst dayState = await this.getStateAsync(id);\r\n\t\t\tlet day;\r\n\t\t\tif (dayState) {\r\n\t\t\t\tconst date = new Date(dayState.ts);\r\n\t\t\t\tday = date.getDate();\r\n\t\t\t} else {\r\n\t\t\t\tday = null;\r\n\t\t\t}\r\n\t\t\treturn day;\r\n\t\t} catch (error) {\r\n\t\t\tthis.writeLog(\r\n\t\t\t\t`[ Adapter V:${this.version} dayState ] error: ${error} stack: ${error.stack}`,\r\n\t\t\t\t'error',\r\n\t\t\t);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\t// berechne die diverenz zwischen den preisen\r\n\tprivate async calcPriceDiff(id: string, diffID: string, newPrice: string): Promise<number> {\r\n\t\ttry {\r\n\t\t\tconst oldPrice = await this.oldState(id);\r\n\t\t\tif (oldPrice !== null) {\r\n\t\t\t\tconst diff = parseFloat(newPrice) - parseFloat(oldPrice);\r\n\t\t\t\t// cut the decimal places to 2 places after the decimal point\r\n\t\t\t\tconst diffRound = Math.round(diff * 100) / 100;\r\n\t\t\t\tif (diffRound !== 0) {\r\n\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t`[ Adapter V:${this.version} calcPriceDiff ] oldPrice: ${oldPrice} newPrice: ${newPrice} diff: ${diffRound}`,\r\n\t\t\t\t\t\t'debug',\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn diffRound;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst oldDiff = await this.oldState(diffID);\r\n\t\t\t\t\tif (oldDiff !== null) {\r\n\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t`[ Adapter V:${this.version} calcPriceDiff ] oldPrice: ${oldPrice} newPrice: ${newPrice} oldDiff: ${oldDiff}`,\r\n\t\t\t\t\t\t\t'debug',\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\treturn oldDiff;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t`[ Adapter V:${this.version} calcPriceDiff ] oldDiff: is null`,\r\n\t\t\t\t\t\t\t'debug',\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.writeLog(`[ Adapter V:${this.version} calcPriceDiff ] oldPrice: is null`, 'debug');\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tthis.writeLog(\r\n\t\t\t\t`[ Adapter V:${this.version} calcPriceDiff ] error for ID: ${id} error: ${error} stack: ${error.stack}`,\r\n\t\t\t\t'error',\r\n\t\t\t);\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description write the states to the adapter\r\n\t */\r\n\tprivate async writeState(prices: Result): Promise<void> {\r\n\t\ttry {\r\n\t\t\tconst station = this.config.station;\r\n\t\t\tlet openStationsE5: any[] = [];\r\n\t\t\tconst cheapest_e5: any[] = [];\r\n\t\t\tconst cheapest_e10: any[] = [];\r\n\t\t\tlet openStationsE10: any[] = [];\r\n\t\t\tconst cheapest_diesel: any[] = [];\r\n\t\t\tlet openStationsDiesel: any[] = [];\r\n\r\n\t\t\tawait this.setStateAsync(`stations.adapterStatus`, {\r\n\t\t\t\tval: 'write states',\r\n\t\t\t\tack: true,\r\n\t\t\t});\r\n\r\n\t\t\tconst newPrices: Result = {};\r\n\t\t\t// sort the prices by station\r\n\t\t\tfor (const stationValue of station) {\r\n\t\t\t\tfor (const [stationID, pricesValue] of Object.entries(prices)) {\r\n\t\t\t\t\tif (stationID === stationValue.station) {\r\n\t\t\t\t\t\tnewPrices[stationID] = pricesValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (station.length !== 1) {\r\n\t\t\t\tthis.writeLog(` find cheapest station for e5 / e10 / diesel`, 'debug');\r\n\t\t\t\t// for (const [stationID, pricesValue] of Object.entries(prices)) {\r\n\t\t\t\tfor (const [stationID, pricesValue] of Object.entries(newPrices)) {\r\n\t\t\t\t\tif (pricesValue.status === 'open') {\r\n\t\t\t\t\t\t// find cheapest e5\r\n\t\t\t\t\t\tif (typeof pricesValue.e5 !== 'undefined') {\r\n\t\t\t\t\t\t\tif (pricesValue.e5) {\r\n\t\t\t\t\t\t\t\tcheapest_e5.push({ ...pricesValue, station: stationID });\r\n\t\t\t\t\t\t\t\t//filter the open stations\r\n\t\t\t\t\t\t\t\topenStationsE5 = cheapest_e5.filter((station) => station.status === 'open');\r\n\t\t\t\t\t\t\t\topenStationsE5.sort((a, b) => a.e5 - b.e5);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// find the cheapest e10\r\n\t\t\t\t\t\tif (typeof pricesValue.e10 !== 'undefined') {\r\n\t\t\t\t\t\t\tif (pricesValue.e10) {\r\n\t\t\t\t\t\t\t\tcheapest_e10.push({ ...pricesValue, station: stationID });\r\n\t\t\t\t\t\t\t\t//filter the open stations\r\n\t\t\t\t\t\t\t\topenStationsE10 = cheapest_e10.filter((station) => station.status === 'open');\r\n\t\t\t\t\t\t\t\topenStationsE10.sort((a, b) => a.e10 - b.e10);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// find the cheapest diesel\r\n\t\t\t\t\t\tif (typeof pricesValue.diesel !== 'undefined') {\r\n\t\t\t\t\t\t\tif (pricesValue.diesel) {\r\n\t\t\t\t\t\t\t\tcheapest_diesel.push({ ...pricesValue, station: stationID });\r\n\t\t\t\t\t\t\t\t//filter the open stations\r\n\t\t\t\t\t\t\t\topenStationsDiesel = cheapest_diesel.filter(\r\n\t\t\t\t\t\t\t\t\t(station) => station.status === 'open',\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\topenStationsDiesel.sort((a, b) => a.diesel - b.diesel);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.writeLog(` station ${stationID} is closed`, 'debug');\r\n\t\t\t\t\t\tif (typeof pricesValue.status !== 'undefined') {\r\n\t\t\t\t\t\t\tcheapest_e5.push({ ...pricesValue, station: stationID });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (typeof pricesValue.status !== 'undefined') {\r\n\t\t\t\t\t\t\tcheapest_e10.push({ ...pricesValue, station: stationID });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (typeof pricesValue.status !== 'undefined') {\r\n\t\t\t\t\t\t\tcheapest_diesel.push({ ...pricesValue, station: stationID });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.writeLog(`only one station configured`, 'debug');\r\n\t\t\t\tfor (const [stationID, pricesValue] of Object.entries(prices)) {\r\n\t\t\t\t\tif (pricesValue.status === 'open') {\r\n\t\t\t\t\t\tcheapest_e5.push({ ...pricesValue, station: stationID });\r\n\t\t\t\t\t\tcheapest_e10.push({ ...pricesValue, station: stationID });\r\n\t\t\t\t\t\tcheapest_diesel.push({ ...pricesValue, station: stationID });\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.writeLog(` station ${stationID} is closed`, 'debug');\r\n\t\t\t\t\t\tif (typeof pricesValue.status !== 'undefined') {\r\n\t\t\t\t\t\t\tcheapest_e5.push({ ...pricesValue, station: stationID });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (typeof pricesValue.status !== 'undefined') {\r\n\t\t\t\t\t\t\tcheapest_e10.push({ ...pricesValue, station: stationID });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (typeof pricesValue.status !== 'undefined') {\r\n\t\t\t\t\t\t\tcheapest_diesel.push({ ...pricesValue, station: stationID });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst newE5 = openStationsE5.length > 0 ? openStationsE5 : cheapest_e5;\r\n\t\t\tconst newE10 = openStationsE10.length > 0 ? openStationsE10 : cheapest_e10;\r\n\t\t\tconst newDiesel = openStationsDiesel.length > 0 ? openStationsDiesel : cheapest_diesel;\r\n\r\n\t\t\t// filter all stations with the same price\r\n\t\t\tconst allCheapestE5: object[] = [];\r\n\t\t\tconst allCheapestE10: object[] = [];\r\n\t\t\tconst allCheapestDiesel: object[] = [];\r\n\t\t\tconst filterE5 = newE5.filter((station) => station.e5 === newE5[0].e5);\r\n\t\t\tthis.writeLog(` filterE5 ${JSON.stringify(filterE5)}`, 'debug');\r\n\r\n\t\t\tconst filterE10 = newE10.filter((station) => station.e10 === newE10[0].e10);\r\n\t\t\tthis.writeLog(` filterE10 ${JSON.stringify(filterE10)}`, 'debug');\r\n\r\n\t\t\tconst filterDiesel = newDiesel.filter((station) => station.diesel === newDiesel[0].diesel);\r\n\t\t\tthis.writeLog(` filterDiesel ${JSON.stringify(filterDiesel)}`, 'debug');\r\n\r\n\t\t\tconst cheapestE5State: { index: string; id: string }[] = [];\r\n\t\t\tconst cheapestE10State: { index: string; id: string }[] = [];\r\n\t\t\tconst cheapestDieselState: { index: string; id: string }[] = [];\r\n\t\t\tfor (const filterE5Key in filterE5) {\r\n\t\t\t\tif (filterE5.hasOwnProperty(filterE5Key)) {\r\n\t\t\t\t\tfor (const stationKey in station) {\r\n\t\t\t\t\t\tif (station.hasOwnProperty(stationKey)) {\r\n\t\t\t\t\t\t\tif (filterE5[filterE5Key].station === station[stationKey].station) {\r\n\t\t\t\t\t\t\t\tallCheapestE5.push({ name: station[stationKey].stationname });\r\n\t\t\t\t\t\t\t\tcheapestE5State.push({ index: stationKey, id: station[stationKey].station });\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.writeLog(`cheapestE5State ${JSON.stringify(cheapestE5State)}`, 'debug');\r\n\t\t\t// console.log(` cheapestE5State ${JSON.stringify(cheapestE5State)}`);\r\n\r\n\t\t\t// set all other stations to false\r\n\t\t\tfor (const stationKey in station) {\r\n\t\t\t\tif (station.hasOwnProperty(stationKey)) {\r\n\t\t\t\t\tlet found = false;\r\n\t\t\t\t\tfor (const cheapestE5StateKey in cheapestE5State) {\r\n\t\t\t\t\t\tif (cheapestE5State.hasOwnProperty(cheapestE5StateKey)) {\r\n\t\t\t\t\t\t\tif (cheapestE5State[cheapestE5StateKey].index === stationKey) {\r\n\t\t\t\t\t\t\t\tfound = true;\r\n\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.${stationKey}.e5.cheapest`, {\r\n\t\t\t\t\t\t\t\t\tval: true,\r\n\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!found) {\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.${stationKey}.e5.cheapest`, {\r\n\t\t\t\t\t\t\tval: false,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.writeLog(`allCheapestE5: ${JSON.stringify(allCheapestE5)}`, 'debug');\r\n\r\n\t\t\tfor (const filterE10Key in filterE10) {\r\n\t\t\t\tif (filterE10.hasOwnProperty(filterE10Key)) {\r\n\t\t\t\t\tfor (const stationKey in station) {\r\n\t\t\t\t\t\tif (station.hasOwnProperty(stationKey)) {\r\n\t\t\t\t\t\t\tif (filterE10[filterE10Key].station === station[stationKey].station) {\r\n\t\t\t\t\t\t\t\tallCheapestE10.push({ name: station[stationKey].stationname });\r\n\t\t\t\t\t\t\t\tcheapestE10State.push({ index: stationKey, id: station[stationKey].station });\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.writeLog(` cheapestE10State ${JSON.stringify(cheapestE10State)}`, 'debug');\r\n\t\t\t// console.log(` cheapestE10State ${JSON.stringify(cheapestE10State)}`);\r\n\r\n\t\t\tfor (const stationKey in station) {\r\n\t\t\t\tif (station.hasOwnProperty(stationKey)) {\r\n\t\t\t\t\tlet found = false;\r\n\t\t\t\t\tfor (const cheapestE10StateKey in cheapestE10State) {\r\n\t\t\t\t\t\tif (cheapestE10State.hasOwnProperty(cheapestE10StateKey)) {\r\n\t\t\t\t\t\t\tif (cheapestE10State[cheapestE10StateKey].index === stationKey) {\r\n\t\t\t\t\t\t\t\tfound = true;\r\n\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.${stationKey}.e10.cheapest`, {\r\n\t\t\t\t\t\t\t\t\tval: true,\r\n\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!found) {\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.${stationKey}.e10.cheapest`, {\r\n\t\t\t\t\t\t\tval: false,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.writeLog(`allCheapestE10: ${JSON.stringify(allCheapestE10)}`, 'debug');\r\n\r\n\t\t\tfor (const filterDieselKey in filterDiesel) {\r\n\t\t\t\tif (filterDiesel.hasOwnProperty(filterDieselKey)) {\r\n\t\t\t\t\tfor (const stationKey in station) {\r\n\t\t\t\t\t\tif (station.hasOwnProperty(stationKey)) {\r\n\t\t\t\t\t\t\tif (filterDiesel[filterDieselKey].station === station[stationKey].station) {\r\n\t\t\t\t\t\t\t\tallCheapestDiesel.push({ name: station[stationKey].stationname });\r\n\t\t\t\t\t\t\t\tcheapestDieselState.push({\r\n\t\t\t\t\t\t\t\t\tindex: stationKey,\r\n\t\t\t\t\t\t\t\t\tid: station[stationKey].station,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.writeLog(` cheapestDieselState ${JSON.stringify(cheapestDieselState)}`, 'debug');\r\n\t\t\t// console.log(` cheapestDieselState ${JSON.stringify(cheapestDieselState)}`);\r\n\r\n\t\t\tfor (const stationKey in station) {\r\n\t\t\t\tif (station.hasOwnProperty(stationKey)) {\r\n\t\t\t\t\tlet found = false;\r\n\t\t\t\t\tfor (const cheapestDieselStateKey in cheapestDieselState) {\r\n\t\t\t\t\t\tif (cheapestDieselState.hasOwnProperty(cheapestDieselStateKey)) {\r\n\t\t\t\t\t\t\tif (cheapestDieselState[cheapestDieselStateKey].index === stationKey) {\r\n\t\t\t\t\t\t\t\tfound = true;\r\n\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.${stationKey}.diesel.cheapest`, {\r\n\t\t\t\t\t\t\t\t\tval: true,\r\n\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!found) {\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.${stationKey}.diesel.cheapest`, {\r\n\t\t\t\t\t\t\tval: false,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.writeLog(`allCheapestDiesel: ${JSON.stringify(allCheapestDiesel)}`, 'debug');\r\n\r\n\t\t\t// write all prices to the states\r\n\t\t\tfor (const [key, stationValue] of Object.entries(station)) {\r\n\t\t\t\t// check if stationValue.postCode exists and if it is a string // TODO: remove in once all users have the new version\r\n\t\t\t\tif (stationValue.postCode) {\r\n\t\t\t\t\tconst postCode = stationValue.postCode as any;\r\n\t\t\t\t\tif (typeof postCode !== 'string') {\r\n\t\t\t\t\t\t// parse string to int\r\n\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t`postCode for station ${stationValue.station} name ${stationValue.stationname} is a number => set to string`,\r\n\t\t\t\t\t\t\t'debug',\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t\t`postCode for station ${stationValue.station} name ${stationValue.stationname} is a number => set to string`,\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tstationValue.postCode = postCode.toString();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t`postCode for station ${stationValue.station} name ${stationValue.stationname} is a string`,\r\n\t\t\t\t\t\t\t'debug',\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t`postCode for station ${stationValue.station} name ${stationValue.stationname} is not defined`,\r\n\t\t\t\t\t\t'debug',\r\n\t\t\t\t\t);\r\n\t\t\t\t\tstationValue.postCode = '';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t` cheapest e5: ${newE5[0].e5} at ${newE5[0].station} array: ${JSON.stringify(newE5)}`,\r\n\t\t\t\t\t'debug',\r\n\t\t\t\t);\r\n\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t` cheapest e10: ${newE10[0].e10} at ${newE10[0].station} array: ${JSON.stringify(\r\n\t\t\t\t\t\tnewE10,\r\n\t\t\t\t\t)}`,\r\n\t\t\t\t\t'debug',\r\n\t\t\t\t);\r\n\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t` cheapest diesel: ${newDiesel[0].diesel} at ${\r\n\t\t\t\t\t\tnewDiesel[0].station\r\n\t\t\t\t\t} array: ${JSON.stringify(newDiesel)}`,\r\n\t\t\t\t\t'debug',\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (stationValue.station === newE5[0].station) {\r\n\t\t\t\t\tthis.writeLog(`write the cheapest e5 to the states`, 'debug');\r\n\t\t\t\t\tif (newE5[0].status === 'open') {\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.feed`, {\r\n\t\t\t\t\t\t\tval: parseFloat(newE5[0].e5),\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.station_id`, {\r\n\t\t\t\t\t\t\tval: newE5[0].station,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.name`, {\r\n\t\t\t\t\t\t\tval: stationValue.stationname,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.status`, {\r\n\t\t\t\t\t\t\tval: newE5[0].status,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.discounted`, {\r\n\t\t\t\t\t\t\tval: stationValue.discounted,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.discount`, {\r\n\t\t\t\t\t\t\tval: stationValue.discountObj.discount,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tconst cutPrice = await this.cutPrice(newE5[0].e5);\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.3rd`, {\r\n\t\t\t\t\t\t\tval: cutPrice.price3rd,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.difference`, {\r\n\t\t\t\t\t\t\tval: await this.calcPriceDiff(\r\n\t\t\t\t\t\t\t\t`stations.cheapest.e5.short`,\r\n\t\t\t\t\t\t\t\t`stations.cheapest.e5.difference`,\r\n\t\t\t\t\t\t\t\tcutPrice.priceshort,\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.short`, {\r\n\t\t\t\t\t\t\tval: cutPrice.priceshort,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.cheapest_stations`, {\r\n\t\t\t\t\t\t\tval: JSON.stringify(allCheapestE5),\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tconst combined = `<span class=\"station_open\">${cutPrice.priceshort}<sup style=\"font-size: 50%\">${cutPrice.price3rd}</sup> <span class=\"station_combined_euro\">\u20AC</span></span>`;\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.combined`, {\r\n\t\t\t\t\t\t\tval: combined,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t`Cheapest gas station for e5: ${stationValue.stationname}  id: ${newE5[0].station}`,\r\n\t\t\t\t\t\t\t'debug',\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.feed`, {\r\n\t\t\t\t\t\t\tval: await this.oldState(`stations.cheapest.e5.feed`),\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\tq: 0x40,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tconst short = await this.oldState(`stations.cheapest.e5.short`);\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.short`, {\r\n\t\t\t\t\t\t\tval: short.toString(),\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\tq: 0x40,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.combined`, {\r\n\t\t\t\t\t\t\tval:\r\n\t\t\t\t\t\t\t\tprices[stationValue.station].status === 'closed'\r\n\t\t\t\t\t\t\t\t\t? `<span class=\"station_closed\">${this.config.combinedOptions.closed}</span>`\r\n\t\t\t\t\t\t\t\t\t: prices[stationValue.station].status === 'no prices'\r\n\t\t\t\t\t\t\t\t\t? `<span class=\"station_no_prices\">${this.config.combinedOptions.noPrice}</span>`\r\n\t\t\t\t\t\t\t\t\t: prices[stationValue.station].status === 'not found' ||\r\n\t\t\t\t\t\t\t\t\t  prices[stationValue.station].status === 'no stations'\r\n\t\t\t\t\t\t\t\t\t? `<span class=\"station_not_found\">${this.config.combinedOptions.notFound}</span>`\r\n\t\t\t\t\t\t\t\t\t: null,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.status`, {\r\n\t\t\t\t\t\t\tval: newE5[0].status,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.street`, {\r\n\t\t\t\t\t\tval: stationValue.street\r\n\t\t\t\t\t\t\t? stationValue.street.length > 0\r\n\t\t\t\t\t\t\t\t? stationValue.street\r\n\t\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\t\t: '',\r\n\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (stationValue.street && stationValue.houseNumber) {\r\n\t\t\t\t\t\tif (stationValue.houseNumber.length > 0) {\r\n\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.fullStreet`, {\r\n\t\t\t\t\t\t\t\tval: `${stationValue.street} ${stationValue.houseNumber}`,\r\n\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.fullStreet`, {\r\n\t\t\t\t\t\t\t\tval: stationValue.street,\r\n\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.fullStreet`, {\r\n\t\t\t\t\t\t\tval: '',\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.city`, {\r\n\t\t\t\t\t\tval: stationValue.city ? (stationValue.city.length > 0 ? stationValue.city : '') : '',\r\n\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.postCode`, {\r\n\t\t\t\t\t\tval: stationValue.postCode\r\n\t\t\t\t\t\t\t? stationValue.postCode.length > 0\r\n\t\t\t\t\t\t\t\t? stationValue.postCode\r\n\t\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\t\t: '',\r\n\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.houseNumber`, {\r\n\t\t\t\t\t\tval: stationValue.houseNumber\r\n\t\t\t\t\t\t\t? stationValue.houseNumber.length > 0\r\n\t\t\t\t\t\t\t\t? stationValue.houseNumber\r\n\t\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\t\t: '',\r\n\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.latitude`, {\r\n\t\t\t\t\t\tval: stationValue.latitude\r\n\t\t\t\t\t\t\t? stationValue.latitude > 0\r\n\t\t\t\t\t\t\t\t? stationValue.latitude\r\n\t\t\t\t\t\t\t\t: 0\r\n\t\t\t\t\t\t\t: 0,\r\n\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.longitude`, {\r\n\t\t\t\t\t\tval: stationValue.longitude\r\n\t\t\t\t\t\t\t? stationValue.longitude > 0\r\n\t\t\t\t\t\t\t\t? stationValue.longitude\r\n\t\t\t\t\t\t\t\t: 0\r\n\t\t\t\t\t\t\t: 0,\r\n\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.wholeDay`, {\r\n\t\t\t\t\t\tval: stationValue.wholeDay ? stationValue.wholeDay : false,\r\n\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (stationValue.openingTimes) {\r\n\t\t\t\t\t\tif (stationValue.openingTimes.length > 0) {\r\n\t\t\t\t\t\t\tif (stationValue.openingTimes !== 'noData') {\r\n\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.openingTimes`, {\r\n\t\t\t\t\t\t\t\t\tval: JSON.stringify(stationValue.openingTimes),\r\n\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.openingTimes`, {\r\n\t\t\t\t\t\t\t\t\tval: 'no Data',\r\n\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.openingTimes`, {\r\n\t\t\t\t\t\t\t\tval: 'no Data',\r\n\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.openingTimes`, {\r\n\t\t\t\t\t\t\tval: 'no data',\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (stationValue.overrides) {\r\n\t\t\t\t\t\tif (stationValue.overrides.length > 0) {\r\n\t\t\t\t\t\t\tif (stationValue.overrides !== 'noData') {\r\n\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.overrides`, {\r\n\t\t\t\t\t\t\t\t\tval: JSON.stringify(stationValue.overrides),\r\n\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.overrides`, {\r\n\t\t\t\t\t\t\t\t\tval: 'no Data',\r\n\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.overrides`, {\r\n\t\t\t\t\t\t\t\tval: 'no Data',\r\n\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e5.overrides`, {\r\n\t\t\t\t\t\t\tval: 'no data',\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (stationValue.station === newE10[0].station) {\r\n\t\t\t\t\tthis.writeLog(`write the cheapest e10 to the states`, 'debug');\r\n\t\t\t\t\tif (newE10[0].status === 'open') {\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.feed`, {\r\n\t\t\t\t\t\t\tval: parseFloat(newE10[0].e10),\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.station_id`, {\r\n\t\t\t\t\t\t\tval: newE10[0].station,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.name`, {\r\n\t\t\t\t\t\t\tval: stationValue.stationname,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.status`, {\r\n\t\t\t\t\t\t\tval: newE10[0].status,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.discounted`, {\r\n\t\t\t\t\t\t\tval: stationValue.discounted,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.discount`, {\r\n\t\t\t\t\t\t\tval: stationValue.discountObj.discount,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tconst cutPrice = await this.cutPrice(newE10[0].e10);\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.3rd`, {\r\n\t\t\t\t\t\t\tval: cutPrice.price3rd,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.difference`, {\r\n\t\t\t\t\t\t\tval: await this.calcPriceDiff(\r\n\t\t\t\t\t\t\t\t`stations.cheapest.e10.short`,\r\n\t\t\t\t\t\t\t\t`stations.cheapest.e10.difference`,\r\n\t\t\t\t\t\t\t\tcutPrice.priceshort,\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.short`, {\r\n\t\t\t\t\t\t\tval: cutPrice.priceshort,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.cheapest_stations`, {\r\n\t\t\t\t\t\t\tval: JSON.stringify(allCheapestE10),\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tconst combined = `<span class=\"station_open\">${cutPrice.priceshort}<sup style=\"font-size: 50%\">${cutPrice.price3rd}</sup> <span class=\"station_combined_euro\">\u20AC</span></span>`;\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.combined`, {\r\n\t\t\t\t\t\t\tval: combined,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t`Cheapest gas station for e10: ${stationValue.stationname}  id: ${newE10[0].station}`,\r\n\t\t\t\t\t\t\t'debug',\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.feed`, {\r\n\t\t\t\t\t\t\tval: await this.oldState(`stations.cheapest.e10.feed`),\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\tq: 0x40,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tconst short = await this.oldState(`stations.cheapest.e10.short`);\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.short`, {\r\n\t\t\t\t\t\t\tval: short.toString(),\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\tq: 0x40,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.combined`, {\r\n\t\t\t\t\t\t\tval:\r\n\t\t\t\t\t\t\t\tprices[stationValue.station].status === 'closed'\r\n\t\t\t\t\t\t\t\t\t? `<span class=\"station_closed\">${this.config.combinedOptions.closed}</span>`\r\n\t\t\t\t\t\t\t\t\t: prices[stationValue.station].status === 'no prices'\r\n\t\t\t\t\t\t\t\t\t? `<span class=\"station_no_prices\">${this.config.combinedOptions.noPrice}</span>`\r\n\t\t\t\t\t\t\t\t\t: prices[stationValue.station].status === 'not found' ||\r\n\t\t\t\t\t\t\t\t\t  prices[stationValue.station].status === 'no stations'\r\n\t\t\t\t\t\t\t\t\t? `<span class=\"station_not_found\">${this.config.combinedOptions.notFound}</span>`\r\n\t\t\t\t\t\t\t\t\t: null,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.status`, {\r\n\t\t\t\t\t\t\tval: newE10[0].status,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.street`, {\r\n\t\t\t\t\t\tval: stationValue.street\r\n\t\t\t\t\t\t\t? stationValue.street.length > 0\r\n\t\t\t\t\t\t\t\t? stationValue.street\r\n\t\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\t\t: '',\r\n\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (stationValue.street && stationValue.houseNumber) {\r\n\t\t\t\t\t\tif (stationValue.houseNumber.length > 0) {\r\n\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.fullStreet`, {\r\n\t\t\t\t\t\t\t\tval: `${stationValue.street} ${stationValue.houseNumber}`,\r\n\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.fullStreet`, {\r\n\t\t\t\t\t\t\t\tval: stationValue.street,\r\n\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.fullStreet`, {\r\n\t\t\t\t\t\t\tval: '',\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.city`, {\r\n\t\t\t\t\t\tval: stationValue.city ? (stationValue.city.length > 0 ? stationValue.city : '') : '',\r\n\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.postCode`, {\r\n\t\t\t\t\t\tval: stationValue.postCode\r\n\t\t\t\t\t\t\t? stationValue.postCode.length > 0\r\n\t\t\t\t\t\t\t\t? stationValue.postCode\r\n\t\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\t\t: '',\r\n\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.houseNumber`, {\r\n\t\t\t\t\t\tval: stationValue.houseNumber\r\n\t\t\t\t\t\t\t? stationValue.houseNumber.length > 0\r\n\t\t\t\t\t\t\t\t? stationValue.houseNumber\r\n\t\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\t\t: '',\r\n\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.latitude`, {\r\n\t\t\t\t\t\tval: stationValue.latitude\r\n\t\t\t\t\t\t\t? stationValue.latitude > 0\r\n\t\t\t\t\t\t\t\t? stationValue.latitude\r\n\t\t\t\t\t\t\t\t: 0\r\n\t\t\t\t\t\t\t: 0,\r\n\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.longitude`, {\r\n\t\t\t\t\t\tval: stationValue.longitude\r\n\t\t\t\t\t\t\t? stationValue.longitude > 0\r\n\t\t\t\t\t\t\t\t? stationValue.longitude\r\n\t\t\t\t\t\t\t\t: 0\r\n\t\t\t\t\t\t\t: 0,\r\n\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.wholeDay`, {\r\n\t\t\t\t\t\tval: stationValue.wholeDay,\r\n\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (stationValue.openingTimes) {\r\n\t\t\t\t\t\tif (stationValue.openingTimes.length > 0) {\r\n\t\t\t\t\t\t\tif (stationValue.openingTimes !== 'noData') {\r\n\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.openingTimes`, {\r\n\t\t\t\t\t\t\t\t\tval: JSON.stringify(stationValue.openingTimes),\r\n\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.openingTimes`, {\r\n\t\t\t\t\t\t\t\t\tval: 'no Data',\r\n\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.openingTimes`, {\r\n\t\t\t\t\t\t\t\tval: 'no Data',\r\n\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.openingTimes`, {\r\n\t\t\t\t\t\t\tval: 'no data',\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (stationValue.overrides) {\r\n\t\t\t\t\t\tif (stationValue.overrides.length > 0) {\r\n\t\t\t\t\t\t\tif (stationValue.overrides !== 'noData') {\r\n\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.overrides`, {\r\n\t\t\t\t\t\t\t\t\tval: JSON.stringify(stationValue.overrides),\r\n\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.overrides`, {\r\n\t\t\t\t\t\t\t\t\tval: 'no Data',\r\n\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.overrides`, {\r\n\t\t\t\t\t\t\t\tval: 'no Data',\r\n\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.e10.overrides`, {\r\n\t\t\t\t\t\t\tval: 'no data',\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (stationValue.station === newDiesel[0].station) {\r\n\t\t\t\t\tthis.writeLog(`write the cheapest diesel to the states`, 'debug');\r\n\t\t\t\t\tif (newDiesel[0].status === 'open') {\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.feed`, {\r\n\t\t\t\t\t\t\tval: parseFloat(newDiesel[0].diesel),\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.station_id`, {\r\n\t\t\t\t\t\t\tval: newDiesel[0].station,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.name`, {\r\n\t\t\t\t\t\t\tval: stationValue.stationname,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.status`, {\r\n\t\t\t\t\t\t\tval: newDiesel[0].status,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.discounted`, {\r\n\t\t\t\t\t\t\tval: stationValue.discounted,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.discount`, {\r\n\t\t\t\t\t\t\tval: stationValue.discountObj.discount,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tconst cutPrice = await this.cutPrice(newDiesel[0].diesel);\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.3rd`, {\r\n\t\t\t\t\t\t\tval: cutPrice.price3rd,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.difference`, {\r\n\t\t\t\t\t\t\tval: await this.calcPriceDiff(\r\n\t\t\t\t\t\t\t\t`stations.cheapest.diesel.short`,\r\n\t\t\t\t\t\t\t\t`stations.cheapest.diesel.difference`,\r\n\t\t\t\t\t\t\t\tcutPrice.priceshort,\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.short`, {\r\n\t\t\t\t\t\t\tval: cutPrice.priceshort,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.cheapest_stations`, {\r\n\t\t\t\t\t\t\tval: JSON.stringify(allCheapestDiesel),\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tconst combined = `<span class=\"station_open\">${cutPrice.priceshort}<sup style=\"font-size: 50%\">${cutPrice.price3rd}</sup> <span class=\"station_combined_euro\">\u20AC</span></span>`;\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.combined`, {\r\n\t\t\t\t\t\t\tval: combined,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t`Cheapest gas station for diesel: ${stationValue.stationname}  id: ${newDiesel[0].station}`,\r\n\t\t\t\t\t\t\t'debug',\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.feed`, {\r\n\t\t\t\t\t\t\tval: await this.oldState(`stations.cheapest.diesel.feed`),\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\tq: 0x40,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tconst short = await this.oldState(`stations.cheapest.diesel.short`);\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.short`, {\r\n\t\t\t\t\t\t\tval: short.toString(),\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\tq: 0x40,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.combined`, {\r\n\t\t\t\t\t\t\tval:\r\n\t\t\t\t\t\t\t\tprices[stationValue.station].status === 'closed'\r\n\t\t\t\t\t\t\t\t\t? `<span class=\"station_closed\">${this.config.combinedOptions.closed}</span>`\r\n\t\t\t\t\t\t\t\t\t: prices[stationValue.station].status === 'no prices'\r\n\t\t\t\t\t\t\t\t\t? `<span class=\"station_no_prices\">${this.config.combinedOptions.noPrice}</span>`\r\n\t\t\t\t\t\t\t\t\t: prices[stationValue.station].status === 'not found' ||\r\n\t\t\t\t\t\t\t\t\t  prices[stationValue.station].status === 'no stations'\r\n\t\t\t\t\t\t\t\t\t? `<span class=\"station_not_found\">${this.config.combinedOptions.notFound}</span>`\r\n\t\t\t\t\t\t\t\t\t: null,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.status`, {\r\n\t\t\t\t\t\t\tval: newDiesel[0].status,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.street`, {\r\n\t\t\t\t\t\tval: stationValue.street\r\n\t\t\t\t\t\t\t? stationValue.street.length > 0\r\n\t\t\t\t\t\t\t\t? stationValue.street\r\n\t\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\t\t: '',\r\n\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (stationValue.street && stationValue.houseNumber) {\r\n\t\t\t\t\t\tif (stationValue.houseNumber.length > 0) {\r\n\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.fullStreet`, {\r\n\t\t\t\t\t\t\t\tval: `${stationValue.street} ${stationValue.houseNumber}`,\r\n\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.fullStreet`, {\r\n\t\t\t\t\t\t\t\tval: stationValue.street,\r\n\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.fullStreet`, {\r\n\t\t\t\t\t\t\tval: '',\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.city`, {\r\n\t\t\t\t\t\tval: stationValue.city ? (stationValue.city.length > 0 ? stationValue.city : '') : '',\r\n\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.postCode`, {\r\n\t\t\t\t\t\tval: stationValue.postCode\r\n\t\t\t\t\t\t\t? stationValue.postCode.length > 0\r\n\t\t\t\t\t\t\t\t? stationValue.postCode\r\n\t\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\t\t: '',\r\n\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.houseNumber`, {\r\n\t\t\t\t\t\tval: stationValue.houseNumber\r\n\t\t\t\t\t\t\t? stationValue.houseNumber.length > 0\r\n\t\t\t\t\t\t\t\t? stationValue.houseNumber\r\n\t\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\t\t: '',\r\n\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.latitude`, {\r\n\t\t\t\t\t\tval: stationValue.latitude\r\n\t\t\t\t\t\t\t? stationValue.latitude > 0\r\n\t\t\t\t\t\t\t\t? stationValue.latitude\r\n\t\t\t\t\t\t\t\t: 0\r\n\t\t\t\t\t\t\t: 0,\r\n\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.longitude`, {\r\n\t\t\t\t\t\tval: stationValue.longitude\r\n\t\t\t\t\t\t\t? stationValue.longitude > 0\r\n\t\t\t\t\t\t\t\t? stationValue.longitude\r\n\t\t\t\t\t\t\t\t: 0\r\n\t\t\t\t\t\t\t: 0,\r\n\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.wholeDay`, {\r\n\t\t\t\t\t\tval: stationValue.wholeDay ? stationValue.wholeDay : false,\r\n\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (stationValue.openingTimes) {\r\n\t\t\t\t\t\tif (stationValue.openingTimes.length > 0) {\r\n\t\t\t\t\t\t\tif (stationValue.openingTimes !== 'noData') {\r\n\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.openingTimes`, {\r\n\t\t\t\t\t\t\t\t\tval: JSON.stringify(stationValue.openingTimes),\r\n\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.openingTimes`, {\r\n\t\t\t\t\t\t\t\t\tval: 'no Data',\r\n\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.openingTimes`, {\r\n\t\t\t\t\t\t\t\tval: 'no Data',\r\n\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.openingTimes`, {\r\n\t\t\t\t\t\t\tval: 'no data',\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (stationValue.overrides) {\r\n\t\t\t\t\t\tif (stationValue.overrides.length > 0) {\r\n\t\t\t\t\t\t\tif (stationValue.overrides !== 'noData') {\r\n\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.overrides`, {\r\n\t\t\t\t\t\t\t\t\tval: JSON.stringify(stationValue.overrides),\r\n\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.overrides`, {\r\n\t\t\t\t\t\t\t\t\tval: 'no Data',\r\n\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.overrides`, {\r\n\t\t\t\t\t\t\t\tval: 'no Data',\r\n\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.cheapest.diesel.overrides`, {\r\n\t\t\t\t\t\t\tval: 'no data',\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// write all available stations to state\r\n\t\t\t\tfor (const [pricesKey] of Object.entries(prices)) {\r\n\t\t\t\t\tif (stationValue.station === pricesKey) {\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.name`, {\r\n\t\t\t\t\t\t\tval: stationValue.stationname,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.station_id`, {\r\n\t\t\t\t\t\t\tval: stationValue.station,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.status`, {\r\n\t\t\t\t\t\t\tval: prices[stationValue.station].status,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.discounted`, {\r\n\t\t\t\t\t\t\tval: stationValue.discounted,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.discount`, {\r\n\t\t\t\t\t\t\tval: stationValue.discountObj.discount,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.street`, {\r\n\t\t\t\t\t\t\tval: stationValue.street\r\n\t\t\t\t\t\t\t\t? stationValue.street.length > 0\r\n\t\t\t\t\t\t\t\t\t? stationValue.street\r\n\t\t\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\t\t\t: '',\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (stationValue.street && stationValue.houseNumber) {\r\n\t\t\t\t\t\t\tif (stationValue.houseNumber.length > 0) {\r\n\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.fullStreet`, {\r\n\t\t\t\t\t\t\t\t\tval: `${stationValue.street} ${stationValue.houseNumber}`,\r\n\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.fullStreet`, {\r\n\t\t\t\t\t\t\t\t\tval: stationValue.street,\r\n\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.fullStreet`, {\r\n\t\t\t\t\t\t\t\tval: '',\r\n\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.city`, {\r\n\t\t\t\t\t\t\tval: stationValue.city\r\n\t\t\t\t\t\t\t\t? stationValue.city.length > 0\r\n\t\t\t\t\t\t\t\t\t? stationValue.city\r\n\t\t\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\t\t\t: '',\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.postCode`, {\r\n\t\t\t\t\t\t\tval: stationValue.postCode\r\n\t\t\t\t\t\t\t\t? stationValue.postCode.length > 0\r\n\t\t\t\t\t\t\t\t\t? stationValue.postCode\r\n\t\t\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\t\t\t: '',\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.houseNumber`, {\r\n\t\t\t\t\t\t\tval: stationValue.houseNumber\r\n\t\t\t\t\t\t\t\t? stationValue.houseNumber.length > 0\r\n\t\t\t\t\t\t\t\t\t? stationValue.houseNumber\r\n\t\t\t\t\t\t\t\t\t: ''\r\n\t\t\t\t\t\t\t\t: '',\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.latitude`, {\r\n\t\t\t\t\t\t\tval: stationValue.latitude ? stationValue.latitude : 0,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.longitude`, {\r\n\t\t\t\t\t\t\tval: stationValue.longitude ? stationValue.longitude : 0,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.wholeDay`, {\r\n\t\t\t\t\t\t\tval: stationValue.wholeDay ? stationValue.wholeDay : false,\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (stationValue.openingTimes) {\r\n\t\t\t\t\t\t\tif (stationValue.openingTimes.length > 0) {\r\n\t\t\t\t\t\t\t\tif (stationValue.openingTimes !== 'noData') {\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.openingTimes`, {\r\n\t\t\t\t\t\t\t\t\t\tval: JSON.stringify(stationValue.openingTimes),\r\n\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.openingTimes`, {\r\n\t\t\t\t\t\t\t\t\t\tval: 'no Data',\r\n\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.openingTimes`, {\r\n\t\t\t\t\t\t\t\t\tval: 'no Data',\r\n\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.openingTimes`, {\r\n\t\t\t\t\t\t\t\tval: 'no data',\r\n\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (stationValue.overrides) {\r\n\t\t\t\t\t\t\tif (stationValue.overrides.length > 0) {\r\n\t\t\t\t\t\t\t\tif (stationValue.overrides !== 'noData') {\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.overrides`, {\r\n\t\t\t\t\t\t\t\t\t\tval: JSON.stringify(stationValue.overrides),\r\n\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.overrides`, {\r\n\t\t\t\t\t\t\t\t\t\tval: 'no Data',\r\n\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.overrides`, {\r\n\t\t\t\t\t\t\t\t\tval: 'no Data',\r\n\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tawait this.setStateAsync(`stations.${key}.overrides`, {\r\n\t\t\t\t\t\t\t\tval: 'no data',\r\n\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Reset min/max at new day\r\n\t\t\t\t\t\tfor (const fuelTypesKey in this.fuelTypes) {\r\n\t\t\t\t\t\t\tif (this.fuelTypes.hasOwnProperty(fuelTypesKey)) {\r\n\t\t\t\t\t\t\t\tconst feedMinDay = await this.dayState(\r\n\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.feed_min`,\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\tconst now = new Date();\r\n\t\t\t\t\t\t\t\tif (now.getDate() !== feedMinDay) {\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.feed_min`,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tval: 0,\r\n\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.lastUpdate_min`,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tval: Date.now(),\r\n\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.lastUpdate_max`,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tval: Date.now(),\r\n\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.3rd_min`,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tval: 0,\r\n\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.short_min`,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tval: '0',\r\n\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.combined_min`,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tval: '',\r\n\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.feed_max`,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tval: 0,\r\n\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.3rd_max`,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tval: 0,\r\n\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.short_max`,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tval: '0',\r\n\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.combined_max`,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tval: '',\r\n\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t\t\t\t`Min/Max prices have been reset, because we have an new day. Today: ${now.getDate()} // Day of ${key}.${\r\n\t\t\t\t\t\t\t\t\t\t\tthis.fuelTypes[fuelTypesKey]\r\n\t\t\t\t\t\t\t\t\t\t}.minmax.feed_min: ${feedMinDay}`,\r\n\t\t\t\t\t\t\t\t\t\t'debug',\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (prices[stationValue.station].status === 'open') {\r\n\t\t\t\t\t\t\tfor (const fuelTypesKey in this.fuelTypes) {\r\n\t\t\t\t\t\t\t\tif (this.fuelTypes.hasOwnProperty(fuelTypesKey)) {\r\n\t\t\t\t\t\t\t\t\tif (prices[stationValue.station][this.fuelTypes[fuelTypesKey]]) {\r\n\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.feed`,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tval: parseFloat(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tprices[stationValue.station][\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.fuelTypes[fuelTypesKey]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\tconst pricesObj = await this.cutPrice(\r\n\t\t\t\t\t\t\t\t\t\t\tprices[stationValue.station][this.fuelTypes[fuelTypesKey]],\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.3rd`,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tval: pricesObj.price3rd,\r\n\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.difference`,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tval: await this.calcPriceDiff(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.short`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.difference`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpricesObj.priceshort,\r\n\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.short`,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tval: pricesObj.priceshort,\r\n\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\tconst combined = `<span class=\"station_open\">${pricesObj.priceshort}<sup style=\"font-size: 50%\">${pricesObj.price3rd}</sup> <span class=\"station_combined_euro\">\u20AC</span></span>`;\r\n\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.combined`,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tval: combined,\r\n\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\t// min prices\r\n\t\t\t\t\t\t\t\t\t\tconst feed_min = await this.oldState(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.feed_min`,\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t(feed_min >=\r\n\t\t\t\t\t\t\t\t\t\t\t\tparseFloat(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tprices[stationValue.station][\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.fuelTypes[fuelTypesKey]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t) ||\r\n\t\t\t\t\t\t\t\t\t\t\t\tfeed_min === 0) &&\r\n\t\t\t\t\t\t\t\t\t\t\t(feed_min !== undefined || true)\r\n\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t\tfeed_min >\r\n\t\t\t\t\t\t\t\t\t\t\t\tparseFloat(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tprices[stationValue.station][\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.fuelTypes[fuelTypesKey]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.lastUpdate_min`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tval: Date.now(),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t\t\t\t\t\t`New minimum price for ${key}.${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.fuelTypes[fuelTypesKey]\r\n\t\t\t\t\t\t\t\t\t\t\t\t}: ${parseFloat(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tprices[stationValue.station][\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.fuelTypes[fuelTypesKey]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t'debug',\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.feed_min`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tval: parseFloat(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tprices[stationValue.station][\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.fuelTypes[fuelTypesKey]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.3rd_min`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tval: pricesObj.price3rd,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.short_min`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tval: pricesObj.priceshort,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.combined_min`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tval: combined,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t// max prices from feed\r\n\t\t\t\t\t\t\t\t\t\tconst feed_max = await this.oldState(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.feed_max`,\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t(feed_max <=\r\n\t\t\t\t\t\t\t\t\t\t\t\tparseFloat(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tprices[stationValue.station][\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.fuelTypes[fuelTypesKey]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t) ||\r\n\t\t\t\t\t\t\t\t\t\t\t\tfeed_max === 0) &&\r\n\t\t\t\t\t\t\t\t\t\t\t(feed_max !== undefined || true)\r\n\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\t\t\tfeed_max <\r\n\t\t\t\t\t\t\t\t\t\t\t\tparseFloat(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tprices[stationValue.station][\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.fuelTypes[fuelTypesKey]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.lastUpdate_max`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tval: Date.now(),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t\t\t\t\t\t`New maximum price for ${key}.${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.fuelTypes[fuelTypesKey]\r\n\t\t\t\t\t\t\t\t\t\t\t\t}: ${parseFloat(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tprices[stationValue.station][\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.fuelTypes[fuelTypesKey]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t'debug',\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.feed_max`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tval: parseFloat(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tprices[stationValue.station][\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.fuelTypes[fuelTypesKey]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.3rd_max`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tval: pricesObj.price3rd,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.short_max`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tval: pricesObj.priceshort,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.combined_max`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tval: combined,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tconst short = await this.oldState(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.short`,\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\tif (short !== undefined || true) {\r\n\t\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.short`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tval: short.toString(),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tq: 0x40,\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.short`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tval: '0',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tq: 0x40,\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.feed`,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tval: await this.oldState(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.feed`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\tq: 0x40,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.combined`,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tval: `<span class=\"station_no_prices\">${this.config.combinedOptions.noPrice}</span>`,\r\n\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.feed_min`,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tval: await this.oldState(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.feed_min`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\tq: 0x40,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\tconst shortmin = await this.oldState(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.short_min`,\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.short_min`,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tval: shortmin.toString(),\r\n\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\tq: 0x40,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.combined_min`,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tval: `<span class=\"station_no_prices\">${this.config.combinedOptions.noPrice}</span>`,\r\n\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.feed_max`,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tval: await this.oldState(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.feed_max`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\tq: 0x40,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\tconst shortmax = await this.oldState(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.short_max`,\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.short_max`,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tval: shortmax.toString(),\r\n\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\tq: 0x40,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.combined_max`,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tval: `<span class=\"station_no_prices\">${this.config.combinedOptions.noPrice}</span>`,\r\n\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t\t\t\t\t`There is no ${this.fuelTypes[fuelTypesKey]} in the ${stationValue.stationname} ID: ${stationValue.station} station.`,\r\n\t\t\t\t\t\t\t\t\t\t\t'debug',\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (prices[stationValue.station].status === 'closed') {\r\n\t\t\t\t\t\t\tif (this.config.resetValues) {\r\n\t\t\t\t\t\t\t\tfor (const fuelTypesKey in this.fuelTypes) {\r\n\t\t\t\t\t\t\t\t\tif (this.fuelTypes.hasOwnProperty(fuelTypesKey)) {\r\n\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.feed`,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tval: 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.short`,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tval: '0',\r\n\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.combined`,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tval: `<span class=\"station_closed\">${this.config.combinedOptions.closed}</span>`,\r\n\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfor (const fuelTypesKey in this.fuelTypes) {\r\n\t\t\t\t\t\t\t\t\tif (this.fuelTypes.hasOwnProperty(fuelTypesKey)) {\r\n\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.feed`,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tval: await this.oldState(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.feed`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\tq: 0x40,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\tconst short = await this.oldState(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.short`,\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.short`,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tval: short.toString(),\r\n\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\tq: 0x40,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.combined`,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\tval: `<span class=\"station_closed\">${this.config.combinedOptions.closed}</span>`,\r\n\t\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (prices[stationValue.station].status === 'closed')\r\n\t\t\t\t\t\t\t\tthis.writeLog(`${stationValue.stationname} is Closed`, `debug`);\r\n\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\tprices[stationValue.station].status === 'no prices' ||\r\n\t\t\t\t\t\t\tprices[stationValue.station].status === 'not found' ||\r\n\t\t\t\t\t\t\tprices[stationValue.station].status === 'no stations'\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tfor (const fuelTypesKey in this.fuelTypes) {\r\n\t\t\t\t\t\t\t\tif (this.fuelTypes.hasOwnProperty(fuelTypesKey)) {\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.feed`,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tval: await this.oldState(\r\n\t\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.feed`,\r\n\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\tq: 0x40,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\tconst short = await this.oldState(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.short`,\r\n\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.short`,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tval: short.toString(),\r\n\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\tq: 0x40,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.combined`,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tval:\r\n\t\t\t\t\t\t\t\t\t\t\t\tprices[stationValue.station].status === 'closed'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? `<span class=\"station_closed\">${this.config.combinedOptions.closed}</span>`\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: prices[stationValue.station].status === 'no prices'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? `<span class=\"station_no_prices\">${this.config.combinedOptions.noPrice}</span>`\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: prices[stationValue.station].status === 'not found' ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  prices[stationValue.station].status === 'no stations'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? `<span class=\"station_not_found\">${this.config.combinedOptions.notFound}</span>`\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: null,\r\n\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\tq: 0,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.feed_min`,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tval: await this.oldState(\r\n\t\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.feed_min`,\r\n\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\tq: 0x40,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\tconst shortmin = await this.oldState(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.short_min`,\r\n\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.short_min`,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tval: shortmin.toString(),\r\n\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\tq: 0x40,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.combined_min`,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tval:\r\n\t\t\t\t\t\t\t\t\t\t\t\tprices[stationValue.station].status === 'closed'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? `<span class=\"station_closed\">${this.config.combinedOptions.closed}</span>`\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: prices[stationValue.station].status === 'no prices'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? `<span class=\"station_no_prices\">${this.config.combinedOptions.noPrice}</span>`\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: prices[stationValue.station].status === 'not found' ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  prices[stationValue.station].status === 'no stations'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? `<span class=\"station_not_found\">${this.config.combinedOptions.notFound}</span>`\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: null,\r\n\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\tq: 0,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.feed_max`,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tval: await this.oldState(\r\n\t\t\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.feed_max`,\r\n\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\tq: 0x40,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\tconst shortmax = await this.oldState(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.short_max`,\r\n\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.short_max`,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tval: shortmax.toString(),\r\n\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\tq: 0x40,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\t\tawait this.setStateAsync(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${key}.${this.fuelTypes[fuelTypesKey]}.minmax.combined_max`,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tval:\r\n\t\t\t\t\t\t\t\t\t\t\t\tprices[stationValue.station].status === 'closed'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? `<span class=\"station_closed\">${this.config.combinedOptions.closed}</span>`\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: prices[stationValue.station].status === 'no prices'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? `<span class=\"station_no_prices\">${this.config.combinedOptions.noPrice}</span>`\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: prices[stationValue.station].status === 'not found' ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t  prices[stationValue.station].status === 'no stations'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? `<span class=\"station_not_found\">${this.config.combinedOptions.notFound}</span>`\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: null,\r\n\t\t\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t\t\t\tq: 0,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (prices[stationValue.station].status === 'no prices')\r\n\t\t\t\t\t\t\t\tthis.writeLog(`there are no prices at ${stationValue.stationname}`, `warn`);\r\n\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tprices[stationValue.station].status === 'not found' ||\r\n\t\t\t\t\t\t\t\tprices[stationValue.station].status === 'no stations'\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t\t\t`station ${stationValue.stationname} with ID: ${stationValue.station} was not found`,\r\n\t\t\t\t\t\t\t\t\t`warn`,\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// create a JsonTable an write in a state\r\n\t\t\t\tconst JsonTable = await this.createJsonTable(prices, station);\r\n\t\t\t\tawait this.setStateAsync(`stations.jsonTable`, {\r\n\t\t\t\t\tval: JSON.stringify(JsonTable),\r\n\t\t\t\t\tack: true,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tthis.writeLog(\r\n\t\t\t\t`[ Adapter V:${this.version} writeState ] error: ${error} stack: ${error.stack}`,\r\n\t\t\t\t'error',\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description create a JsonTable vor visualisation\r\n\t */\r\n\tprivate async createJsonTable(\r\n\t\tprice: Result,\r\n\t\tstation: ioBroker.Station[],\r\n\t): Promise<CreateJsonTable[] | undefined> {\r\n\t\ttry {\r\n\t\t\tconst jsonTable = [];\r\n\t\t\tfor (const key in station) {\r\n\t\t\t\tif (station.hasOwnProperty(key)) {\r\n\t\t\t\t\tfor (const [stationID, pricesValue] of Object.entries(price)) {\r\n\t\t\t\t\t\tif (station[key].station === stationID) {\r\n\t\t\t\t\t\t\tif (typeof pricesValue.e5 !== 'number') {\r\n\t\t\t\t\t\t\t\tpricesValue.e5 = await this.oldState(`stations.${key}.e5.feed`);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (typeof pricesValue.e10 !== 'number') {\r\n\t\t\t\t\t\t\t\tpricesValue.e10 = await this.oldState(`stations.${key}.e10.feed`);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (typeof pricesValue.diesel !== 'number') {\r\n\t\t\t\t\t\t\t\tpricesValue.diesel = await this.oldState(`stations.${key}.diesel.feed`);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (pricesValue.status !== 'open') {\r\n\t\t\t\t\t\t\t\tpricesValue.e5 = await this.oldState(`stations.${key}.e5.feed`);\r\n\t\t\t\t\t\t\t\tpricesValue.e10 = await this.oldState(`stations.${key}.e10.feed`);\r\n\t\t\t\t\t\t\t\tpricesValue.diesel = await this.oldState(`stations.${key}.diesel.feed`);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tconst status =\r\n\t\t\t\t\t\t\t\tpricesValue.status === 'open'\r\n\t\t\t\t\t\t\t\t\t? 'open'\r\n\t\t\t\t\t\t\t\t\t: pricesValue.status === 'closed'\r\n\t\t\t\t\t\t\t\t\t? this.config.combinedOptions.closed\r\n\t\t\t\t\t\t\t\t\t: pricesValue.status === 'no prices'\r\n\t\t\t\t\t\t\t\t\t? this.config.combinedOptions.noPrice\r\n\t\t\t\t\t\t\t\t\t: pricesValue.status === 'not found' ||\r\n\t\t\t\t\t\t\t\t\t  pricesValue.status === 'no stations'\r\n\t\t\t\t\t\t\t\t\t? this.config.combinedOptions.notFound\r\n\t\t\t\t\t\t\t\t\t: '';\r\n\r\n\t\t\t\t\t\t\tlet e5 = pricesValue.e5;\r\n\t\t\t\t\t\t\tlet e10 = pricesValue.e10;\r\n\t\t\t\t\t\t\tlet diesel = pricesValue.diesel;\r\n\t\t\t\t\t\t\t// limitation to 3 places after the comma\r\n\t\t\t\t\t\t\tif (typeof pricesValue.e5 === 'number') {\r\n\t\t\t\t\t\t\t\te5 = parseFloat(pricesValue.e5.toFixed(3));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (typeof pricesValue.e10 === 'number') {\r\n\t\t\t\t\t\t\t\te10 = parseFloat(pricesValue.e10.toFixed(3));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (typeof pricesValue.diesel === 'number') {\r\n\t\t\t\t\t\t\t\tdiesel = parseFloat(pricesValue.diesel.toFixed(3));\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tconst differenceE5 = await this.oldState(`stations.${key}.e5.difference`);\r\n\t\t\t\t\t\t\tconst differenceE10 = await this.oldState(`stations.${key}.e10.difference`);\r\n\t\t\t\t\t\t\tconst differenceDiesel = await this.oldState(`stations.${key}.diesel.difference`);\r\n\r\n\t\t\t\t\t\t\t// TODO: add Price Difference to the table issue #116\r\n\t\t\t\t\t\t\tjsonTable.push({\r\n\t\t\t\t\t\t\t\tstation: station[key].stationname,\r\n\t\t\t\t\t\t\t\tstatus: status,\r\n\t\t\t\t\t\t\t\te5: e5 as number,\r\n\t\t\t\t\t\t\t\tdifferenceE5: differenceE5,\r\n\t\t\t\t\t\t\t\te10: e10 as number,\r\n\t\t\t\t\t\t\t\tdifferenceE10: differenceE10,\r\n\t\t\t\t\t\t\t\tdiesel: diesel as number,\r\n\t\t\t\t\t\t\t\tdifferenceDiesel: differenceDiesel,\r\n\t\t\t\t\t\t\t\tdiscount: station[key].discounted\r\n\t\t\t\t\t\t\t\t\t? station[key].discountObj.discountType === 'percent'\r\n\t\t\t\t\t\t\t\t\t\t? `${station[key].discountObj.discount}%`\r\n\t\t\t\t\t\t\t\t\t\t: `${station[key].discountObj.discount}\u20AC`\r\n\t\t\t\t\t\t\t\t\t: '0',\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn jsonTable;\r\n\t\t} catch (error) {\r\n\t\t\tthis.writeLog(\r\n\t\t\t\t`[ Adapter V:${this.version} createJsonTable ] error: ${error} stack: ${error.stack}`,\r\n\t\t\t\t'error',\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description This function is used to get the short prices and the 3rd decimal place.\r\n\t */\r\n\tprivate async cutPrice(\r\n\t\tprice: string | number | boolean | undefined,\r\n\t): Promise<{ priceshort: string; price3rd: number }> {\r\n\t\ttry {\r\n\t\t\tthis.writeLog(`cutPrice: ${price} price type ${typeof price}`, 'debug');\r\n\t\t\tif (price === undefined) {\r\n\t\t\t\treturn { priceshort: '0', price3rd: 0 };\r\n\t\t\t}\r\n\t\t\tif (typeof price === 'string') {\r\n\t\t\t\tprice = parseFloat(price);\r\n\t\t\t}\r\n\t\t\tif (typeof price === 'boolean') {\r\n\t\t\t\tprice = 0;\r\n\t\t\t}\r\n\r\n\t\t\t// new cutPrice version Will still be tested\r\n\t\t\tthis.writeLog(`price: ${price}`, 'debug');\r\n\t\t\tprice = price.toFixed(3);\r\n\t\t\tthis.writeLog(` price.toFixed(3): ${price}`, 'debug');\r\n\t\t\tconst priceshort = price.slice(0, price.length - 1);\r\n\t\t\tthis.writeLog(` priceshort: ${priceshort}`, 'debug');\r\n\t\t\tconst price3rd = parseInt(price.slice(-1));\r\n\t\t\tthis.writeLog(` price3rd: ${price3rd}`, 'debug');\r\n\r\n\t\t\treturn {\r\n\t\t\t\tpriceshort,\r\n\t\t\t\tprice3rd,\r\n\t\t\t};\r\n\t\t} catch (error) {\r\n\t\t\tthis.writeLog(\r\n\t\t\t\t`[ Adapter V:${this.version} cutPrice ] error: ${error} stack: ${error.stack}`,\r\n\t\t\t\t'error',\r\n\t\t\t);\r\n\t\t\treturn { priceshort: '0', price3rd: 0 };\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description add Discount to price if discount is active\r\n\t */\r\n\tprivate async addDiscount(\r\n\t\tprice: string | number | boolean | undefined,\r\n\t\tdiscount: number,\r\n\t\tdiscountType: 'absolute' | 'percent',\r\n\t): Promise<number> {\r\n\t\ttry {\r\n\t\t\t// check if price in number format\r\n\t\t\tif (price === undefined) {\r\n\t\t\t\tprice = 0;\r\n\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t`[ Adapter V:${this.version} addDiscount ] price is undefined Price set to ${price}`,\r\n\t\t\t\t\t'debug',\r\n\t\t\t\t);\r\n\t\t\t\tconsole.log('price is undefined');\r\n\t\t\t\treturn price;\r\n\t\t\t}\r\n\t\t\tif (typeof price === 'string') {\r\n\t\t\t\tconsole.log('price is string');\r\n\t\t\t\tprice = parseFloat(price);\r\n\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t`[ Adapter V:${this.version} addDiscount ] price is string Price parse to a number ${price}`,\r\n\t\t\t\t\t'debug',\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (typeof price === 'boolean') {\r\n\t\t\t\tprice = 0;\r\n\t\t\t\tconsole.log('price is boolean');\r\n\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t`[ Adapter V:${this.version} addDiscount ] price is boolean price set to ${price}`,\r\n\t\t\t\t\t'debug',\r\n\t\t\t\t);\r\n\t\t\t\treturn price;\r\n\t\t\t}\r\n\t\t\tif (discountType === 'percent') {\r\n\t\t\t\tthis.writeLog(`[ Adapter V:${this.version} addDiscount ] in percent: ${discount}`, 'debug');\r\n\t\t\t\tconst newPrice = (price * discount) / 100;\r\n\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t`[ Adapter V:${this.version} addDiscount ] return Price with discount ${\r\n\t\t\t\t\t\tprice - parseFloat(newPrice.toFixed(2))\r\n\t\t\t\t\t}`,\r\n\t\t\t\t\t'debug',\r\n\t\t\t\t);\r\n\r\n\t\t\t\tlet discountedPrice = price - parseFloat(newPrice.toFixed(2));\r\n\t\t\t\t// check if the new discountedPrice has only 3 decimal places\r\n\t\t\t\tif (discountedPrice.toString().split('.')[1].length > 3) {\r\n\t\t\t\t\t// if not, round to 3 decimal places\r\n\t\t\t\t\tdiscountedPrice = parseFloat(discountedPrice.toFixed(3));\r\n\t\t\t\t}\r\n\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t`[ Adapter V:${this.version} addDiscount ] return Price with discount ${discountedPrice}`,\r\n\t\t\t\t\t'debug',\r\n\t\t\t\t);\r\n\t\t\t\treturn discountedPrice;\r\n\t\t\t} else if (discountType === 'absolute') {\r\n\t\t\t\tthis.writeLog(`[ Adapter V:${this.version} addDiscount ] in absolute: ${discount}`, 'debug');\r\n\r\n\t\t\t\tlet discountedPrice = parseFloat(parseFloat(String(price - discount)).toFixed(3));\r\n\t\t\t\t// check if the new discountedPrice has only 3 decimal places\r\n\t\t\t\tif (discountedPrice.toString().split('.')[1].length > 3) {\r\n\t\t\t\t\t// if not, round to 3 decimal places\r\n\t\t\t\t\tdiscountedPrice = parseFloat(discountedPrice.toFixed(3));\r\n\t\t\t\t}\r\n\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t`[ Adapter V:${this.version} addDiscount ] return Price with discount ${discountedPrice}`,\r\n\t\t\t\t\t'debug',\r\n\t\t\t\t);\r\n\t\t\t\treturn discountedPrice;\r\n\t\t\t}\r\n\t\t\treturn price;\r\n\t\t} catch (error) {\r\n\t\t\tthis.writeLog(\r\n\t\t\t\t`[ Adapter V:${this.version} addDiscount ] Error for price ${price} and discount ${discount} and discountType ${discountType} error: ${error} stack: ${error.stack}`,\r\n\t\t\t\t'error',\r\n\t\t\t);\r\n\t\t\treturn parseFloat(price as string);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description Function to create all Folder and states for the stations\r\n\t */\r\n\tprivate async createAllStates(stations: ioBroker.Station[]): Promise<void> {\r\n\t\ttry {\r\n\t\t\tthis.writeLog('all states are now created', 'debug');\r\n\r\n\t\t\t//  create all channel\r\n\t\t\tawait this.extendObjectAsync('stations.cheapest', {\r\n\t\t\t\ttype: 'channel',\r\n\t\t\t\tcommon: {\r\n\t\t\t\t\tname: 'Cheapest gas stations',\r\n\t\t\t\t},\r\n\t\t\t\tnative: {},\r\n\t\t\t});\r\n\r\n\t\t\t// create the cheapest folder and states\r\n\t\t\tfor (const fuelTypesKey in this.fuelTypes) {\r\n\t\t\t\tif (this.fuelTypes.hasOwnProperty(fuelTypesKey)) {\r\n\t\t\t\t\tawait this.extendObjectAsync(`stations.cheapest.${this.fuelTypes[fuelTypesKey]}`, {\r\n\t\t\t\t\t\ttype: 'channel',\r\n\t\t\t\t\t\tcommon: {\r\n\t\t\t\t\t\t\tname: `cheapest ${this.fuelTypes[fuelTypesKey].toUpperCase()}`,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tnative: {},\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (const cheapestObjKey in cheapestObj) {\r\n\t\t\t\tif (cheapestObj.hasOwnProperty(cheapestObjKey)) {\r\n\t\t\t\t\tfor (const fuelTypesKey in this.fuelTypes) {\r\n\t\t\t\t\t\tif (this.fuelTypes.hasOwnProperty(fuelTypesKey)) {\r\n\t\t\t\t\t\t\tawait this.extendObjectAsync(\r\n\t\t\t\t\t\t\t\t`stations.cheapest.${this.fuelTypes[fuelTypesKey]}.${cheapestObjKey}`,\r\n\t\t\t\t\t\t\t\tcheapestObj[cheapestObjKey],\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (const statesObjKey in statesObj) {\r\n\t\t\t\tif (statesObj.hasOwnProperty(statesObjKey)) {\r\n\t\t\t\t\tfor (const fuelTypesKey in this.fuelTypes) {\r\n\t\t\t\t\t\tif (this.fuelTypes.hasOwnProperty(fuelTypesKey)) {\r\n\t\t\t\t\t\t\tawait this.extendObjectAsync(\r\n\t\t\t\t\t\t\t\t`stations.cheapest.${this.fuelTypes[fuelTypesKey]}.${statesObjKey}`,\r\n\t\t\t\t\t\t\t\tstatesObj[statesObjKey],\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\tfor (const priceObjKey in priceObj) {\r\n\t\t\t\t\t\t\t\tif (priceObj.hasOwnProperty(priceObjKey)) {\r\n\t\t\t\t\t\t\t\t\tif (priceObjKey !== 'cheapest') {\r\n\t\t\t\t\t\t\t\t\t\tawait this.extendObjectAsync(\r\n\t\t\t\t\t\t\t\t\t\t\t`stations.cheapest.${this.fuelTypes[fuelTypesKey]}.${priceObjKey}`,\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t...priceObj[priceObjKey],\r\n\t\t\t\t\t\t\t\t\t\t\t\tcommon: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t...priceObj[priceObjKey].common,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: `cheapest ${this.fuelTypes[fuelTypesKey]} ${priceObjKey}`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// create all other folder and states\r\n\t\t\tfor (const stationKey in stations) {\r\n\t\t\t\tif (parseFloat(stationKey) <= 9) {\r\n\t\t\t\t\tif (stations.hasOwnProperty(stationKey)) {\r\n\t\t\t\t\t\tconst station: {\r\n\t\t\t\t\t\t\tstation: string;\r\n\t\t\t\t\t\t\tstationname: string;\r\n\t\t\t\t\t\t\tcity: string;\r\n\t\t\t\t\t\t\tpostCode: string;\r\n\t\t\t\t\t\t\tstreet: string;\r\n\t\t\t\t\t\t\thouseNumber: string;\r\n\t\t\t\t\t\t} = stations[stationKey];\r\n\r\n\t\t\t\t\t\tconst stationName = `${station.stationname} (${station.street} ${\r\n\t\t\t\t\t\t\tstation.houseNumber ?? ''\r\n\t\t\t\t\t\t}, ${station.postCode === '' ? '' : station.postCode} ${station.city})`;\r\n\r\n\t\t\t\t\t\tawait this.extendObjectAsync(`stations.${stationKey}`, {\r\n\t\t\t\t\t\t\ttype: 'channel',\r\n\t\t\t\t\t\t\tcommon: {\r\n\t\t\t\t\t\t\t\tname: stationName,\r\n\t\t\t\t\t\t\t\tdesc: `${station.stationname} ID: ${station.station}`,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tnative: {},\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tfor (const fuelTypesKey in this.fuelTypes) {\r\n\t\t\t\t\t\t\tif (this.fuelTypes.hasOwnProperty(fuelTypesKey)) {\r\n\t\t\t\t\t\t\t\tawait this.extendObjectAsync(\r\n\t\t\t\t\t\t\t\t\t`stations.${stationKey}.${this.fuelTypes[fuelTypesKey]}`,\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\ttype: 'channel',\r\n\t\t\t\t\t\t\t\t\t\tcommon: {\r\n\t\t\t\t\t\t\t\t\t\t\tname: this.fuelTypes[fuelTypesKey].toUpperCase(),\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tnative: {},\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (const statesObjKey in statesObj) {\r\n\t\t\t\t\t\t\tif (statesObj.hasOwnProperty(statesObjKey)) {\r\n\t\t\t\t\t\t\t\tawait this.extendObjectAsync(\r\n\t\t\t\t\t\t\t\t\t`stations.${stationKey}.${statesObjKey}`,\r\n\t\t\t\t\t\t\t\t\tstatesObj[statesObjKey],\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tfor (const fuelTypesKey in this.fuelTypes) {\r\n\t\t\t\t\t\t\tfor (const priceObjKey in priceObj) {\r\n\t\t\t\t\t\t\t\tif (priceObj.hasOwnProperty(priceObjKey)) {\r\n\t\t\t\t\t\t\t\t\tawait this.extendObjectAsync(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${stationKey}.${this.fuelTypes[fuelTypesKey]}.${priceObjKey}`,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t...priceObj[priceObjKey],\r\n\t\t\t\t\t\t\t\t\t\t\tcommon: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t...priceObj[priceObjKey].common,\r\n\t\t\t\t\t\t\t\t\t\t\t\tname: `${this.fuelTypes[fuelTypesKey]} ${priceObjKey}`,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// Create min/max channel\r\n\t\t\t\t\t\t\tawait this.extendObjectAsync(\r\n\t\t\t\t\t\t\t\t`stations.${stationKey}.${this.fuelTypes[fuelTypesKey]}.minmax`,\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\ttype: 'channel',\r\n\t\t\t\t\t\t\t\t\tcommon: {\r\n\t\t\t\t\t\t\t\t\t\tname: 'Daily Min/Max',\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tnative: {},\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t//Create min/max states\r\n\t\t\t\t\t\t\tfor (const priceMinMaxObjKey in priceMinMaxObj) {\r\n\t\t\t\t\t\t\t\tif (priceMinMaxObj.hasOwnProperty(priceMinMaxObjKey)) {\r\n\t\t\t\t\t\t\t\t\tawait this.extendObjectAsync(\r\n\t\t\t\t\t\t\t\t\t\t`stations.${stationKey}.${this.fuelTypes[fuelTypesKey]}.minmax.${priceMinMaxObjKey}`,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t...priceMinMaxObj[priceMinMaxObjKey],\r\n\t\t\t\t\t\t\t\t\t\t\tcommon: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t...priceMinMaxObj[priceMinMaxObjKey].common,\r\n\t\t\t\t\t\t\t\t\t\t\t\tname: `${this.fuelTypes[fuelTypesKey]} ${priceMinMaxObjKey}`,\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tawait this.extendObjectAsync(`stations.json`, {\r\n\t\t\t\ttype: 'state',\r\n\t\t\t\tcommon: {\r\n\t\t\t\t\tname: 'tankerkoenig JSON',\r\n\t\t\t\t\tdesc: 'JSON return from tankerkoenig.de with all prices for all stations',\r\n\t\t\t\t\ttype: `string`,\r\n\t\t\t\t\trole: `json`,\r\n\t\t\t\t\tdef: '',\r\n\t\t\t\t\tread: true,\r\n\t\t\t\t\twrite: false,\r\n\t\t\t\t},\r\n\t\t\t\tnative: {},\r\n\t\t\t});\r\n\r\n\t\t\tawait this.extendObjectAsync(`stations.jsonTable`, {\r\n\t\t\t\ttype: 'state',\r\n\t\t\t\tcommon: {\r\n\t\t\t\t\tname: 'JSON Table vor Visualization',\r\n\t\t\t\t\tdesc: 'JsonTable vor vis with all prices for all stations',\r\n\t\t\t\t\ttype: `string`,\r\n\t\t\t\t\trole: `json`,\r\n\t\t\t\t\tdef: '',\r\n\t\t\t\t\tread: true,\r\n\t\t\t\t\twrite: false,\r\n\t\t\t\t},\r\n\t\t\t\tnative: {},\r\n\t\t\t});\r\n\r\n\t\t\tawait this.extendObjectAsync(`stations.lastUpdate`, {\r\n\t\t\t\ttype: 'state',\r\n\t\t\t\tcommon: {\r\n\t\t\t\t\tname: 'tankerkoenig last update',\r\n\t\t\t\t\tdesc: 'last update of tankerkoenig.de',\r\n\t\t\t\t\ttype: `number`,\r\n\t\t\t\t\trole: `value.time`,\r\n\t\t\t\t\tdef: 0,\r\n\t\t\t\t\tread: true,\r\n\t\t\t\t\twrite: false,\r\n\t\t\t\t},\r\n\t\t\t\tnative: {},\r\n\t\t\t});\r\n\r\n\t\t\tawait this.extendObjectAsync(`stations.refresh`, {\r\n\t\t\t\ttype: 'state',\r\n\t\t\t\tcommon: {\r\n\t\t\t\t\tname: 'manuel refresh the data from tankerkoenig.de',\r\n\t\t\t\t\tdesc: 'refresh manual the data from tankerkoenig.de',\r\n\t\t\t\t\ttype: `boolean`,\r\n\t\t\t\t\trole: `button`,\r\n\t\t\t\t\tdef: true,\r\n\t\t\t\t\tread: true,\r\n\t\t\t\t\twrite: true,\r\n\t\t\t\t},\r\n\t\t\t\tnative: {},\r\n\t\t\t});\r\n\r\n\t\t\tawait this.subscribeStates(`stations.refresh`);\r\n\r\n\t\t\t// end of create objects\r\n\t\t} catch (error) {\r\n\t\t\tthis.writeLog(\r\n\t\t\t\t`[ Adapter V:${this.version} createObjects ] Error creating all states: ${error} , stack: ${error.stack}`,\r\n\t\t\t\t'error',\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description a function for log output\r\n\t */\r\n\tprivate writeLog(logtext: string, logtype: 'silly' | 'info' | 'debug' | 'warn' | 'error'): void {\r\n\t\ttry {\r\n\t\t\tif (logtype === 'silly') this.log.silly(logtext);\r\n\t\t\tif (logtype === 'info') this.log.info(logtext);\r\n\t\t\tif (logtype === 'debug') this.log.debug(logtext);\r\n\t\t\tif (logtype === 'warn') this.log.warn(logtext);\r\n\t\t\tif (logtype === 'error') this.log.error(logtext);\r\n\t\t} catch (error) {\r\n\t\t\tthis.log.error(`[ Adapter V:${this.version} writeLog ] error: ${error} , stack: ${error.stack}`);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description Is called when adapter shuts down - callback has to be called under any circumstances!\r\n\t */\r\n\tprivate onUnload(callback: () => void): void {\r\n\t\ttry {\r\n\t\t\tthis.setState(`stations.adapterStatus`, {\r\n\t\t\t\tval: 'offline',\r\n\t\t\t\tack: true,\r\n\t\t\t});\r\n\t\t\t// Here you must clear all timeouts or intervals that may still be active\r\n\t\t\tif (this.requestTimeout) clearInterval(this.requestTimeout);\r\n\t\t\tif (this.refreshTimeout) clearInterval(this.refreshTimeout);\r\n\t\t\tif (this.refreshStatusTimeout) clearTimeout(this.refreshStatusTimeout);\r\n\t\t\tif (this.startRequestTimeout) clearTimeout(this.startRequestTimeout);\r\n\r\n\t\t\tcallback();\r\n\t\t} catch (e) {\r\n\t\t\tthis.writeLog(`[ Adapter V:${this.version} onUnload ] error: ${e} , stack: ${e.stack}`, 'error');\r\n\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * If you need to accept messages in your adapter, uncomment the following block and the corresponding line in the constructor.\r\n\t * Some message was sent to this instance over message box. Used by email, pushover, text2speech, ...\r\n\t * Using this method requires \"common.messagebox\" property to be set to true in io-package.json\r\n\t */\r\n\tprivate async onMessage(obj: ioBroker.Message): Promise<void> {\r\n\t\ttry {\r\n\t\t\tif (typeof obj === 'object' && obj.message) {\r\n\t\t\t\tif (obj.command === 'detailRequest') {\r\n\t\t\t\t\tif (typeof obj.message === 'string') {\r\n\t\t\t\t\t\tawait this.setStateAsync(`stations.adapterStatus`, {\r\n\t\t\t\t\t\t\tval: 'detail request',\r\n\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tconst id = obj.message as string;\r\n\r\n\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t`[ Adapter V:${this.version} onMessage ] start detailRequest for ${id}`,\r\n\t\t\t\t\t\t\t'debug',\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tconst result = await this.detailRequest(id);\r\n\r\n\t\t\t\t\t\tif (!result) {\r\n\t\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t\t`[ Adapter V:${this.version} onMessage ] detailRequest for ${id} failed`,\r\n\t\t\t\t\t\t\t\t'error',\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tawait this.setStateAsync(`stations.adapterStatus`, {\r\n\t\t\t\t\t\t\t\tval: 'idle',\r\n\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (obj.callback) this.sendTo(obj.from, obj.command, 'error', obj.callback);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t\t`[ Adapter V:${\r\n\t\t\t\t\t\t\t\t\tthis.version\r\n\t\t\t\t\t\t\t\t} onMessage ] detailRequest result: ${JSON.stringify(result)}`,\r\n\t\t\t\t\t\t\t\t'debug',\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tawait this.setStateAsync(`stations.adapterStatus`, {\r\n\t\t\t\t\t\t\t\tval: 'idle',\r\n\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (obj.callback) this.sendTo(obj.from, obj.command, result, obj.callback);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tthis.writeLog(`Error onMessage: ${e}`, 'error');\r\n\t\t}\r\n\t}\r\n\r\n\tprivate async detailRequest(id: string): Promise<\r\n\t\t| {\r\n\t\t\t\tstatus: string;\r\n\t\t\t\tok: boolean;\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tstreet: string;\r\n\t\t\t\t\tcity: string;\r\n\t\t\t\t\thouseNumber: string;\r\n\t\t\t\t\tpostCode: number;\r\n\t\t\t\t\tlatitude: number;\r\n\t\t\t\t\tlongitude: number;\r\n\t\t\t\t\twholeDay: boolean;\r\n\t\t\t\t\topeningTimes: { [key: string]: string }[] | string;\r\n\t\t\t\t\toverrides: { [key: string]: string }[] | string;\r\n\t\t\t\t};\r\n\t\t  }\r\n\t\t| undefined\r\n\t> {\r\n\t\ttry {\r\n\t\t\tlet dataJson = undefined;\r\n\t\t\tconst url = `https://creativecommons.tankerkoenig.de/json/detail.php?id=${id}&apikey=${this.decrypt(\r\n\t\t\t\tthis.config.apikey,\r\n\t\t\t)}`;\r\n\t\t\tthis.writeLog(`[ Adapter V:${this.version} detailRequest ] url: ${url}`, 'debug');\r\n\t\t\tconst config = {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'User-Agent': `${this.name}/${this.version}`,\r\n\t\t\t\t\tAccept: 'application/json',\r\n\t\t\t\t},\r\n\t\t\t\ttimeout: 10000,\r\n\t\t\t};\r\n\t\t\tconst result = await axios.get(url, config);\r\n\r\n\t\t\tif (result.status === 200) {\r\n\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t`[ Adapter V:${this.version} detailRequest axios:${\r\n\t\t\t\t\t\taxios.VERSION\r\n\t\t\t\t\t} ] detailRequest result: ${JSON.stringify(result.data)}`,\r\n\t\t\t\t\t'debug',\r\n\t\t\t\t);\r\n\t\t\t\tif (result.data.ok) {\r\n\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t`[ Adapter V:${this.version} detailRequest axios:${axios.VERSION} ] detailRequest for ${id} success`,\r\n\t\t\t\t\t\t'debug',\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t`[ Adapter V:${this.version} detailRequest axios:${\r\n\t\t\t\t\t\t\taxios.VERSION\r\n\t\t\t\t\t\t} ] detailRequest for ${id} result: ${JSON.stringify(result.data)}`,\r\n\t\t\t\t\t\t'debug',\r\n\t\t\t\t\t);\r\n\t\t\t\t\tdataJson = {\r\n\t\t\t\t\t\tstatus: result.data.status,\r\n\t\t\t\t\t\tok: result.data.ok,\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tstreet: result.data.station.street,\r\n\t\t\t\t\t\t\tcity: result.data.station.place,\r\n\t\t\t\t\t\t\thouseNumber: result.data.station.houseNumber,\r\n\t\t\t\t\t\t\tpostCode: result.data.station.postCode,\r\n\t\t\t\t\t\t\tlatitude: result.data.station.lat,\r\n\t\t\t\t\t\t\tlongitude: result.data.station.lng,\r\n\t\t\t\t\t\t\twholeDay: result.data.station.wholeDay,\r\n\t\t\t\t\t\t\topeningTimes:\r\n\t\t\t\t\t\t\t\tresult.data.station.openingTimes.length > 0\r\n\t\t\t\t\t\t\t\t\t? result.data.station.openingTimes\r\n\t\t\t\t\t\t\t\t\t: 'noData',\r\n\t\t\t\t\t\t\toverrides:\r\n\t\t\t\t\t\t\t\tresult.data.station.overrides.length > 0\r\n\t\t\t\t\t\t\t\t\t? result.data.station.overrides\r\n\t\t\t\t\t\t\t\t\t: 'noData',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn dataJson;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t`[ Adapter V:${this.version} detailRequest axios:${axios.VERSION} ] detailRequest for ${id} failed`,\r\n\t\t\t\t\t\t'error',\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t`[ Adapter V:${this.version} detailRequest axios:${\r\n\t\t\t\t\t\t\taxios.VERSION\r\n\t\t\t\t\t\t} ] detailRequest for ${id} result: ${JSON.stringify(result.data)}`,\r\n\t\t\t\t\t\t'error',\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn result.data;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tif (error.response) {\r\n\t\t\t\tif (error.response.status === 503) {\r\n\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t`[ Adapter V:${this.version} detailRequest axios:${axios.VERSION} ] Code: ${\r\n\t\t\t\t\t\t\terror.response.status\r\n\t\t\t\t\t\t} Message: >> ${\r\n\t\t\t\t\t\t\terror.response.statusText\r\n\t\t\t\t\t\t} Rate Limit Exceeded << Data: ${JSON.stringify(error.response.data)}`,\r\n\t\t\t\t\t\t'error',\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t`[ Adapter V:${this.version} detailRequest axios:${\r\n\t\t\t\t\t\t\taxios.VERSION\r\n\t\t\t\t\t\t} ] error.response: Code: ${error.response.status}  Message: ${\r\n\t\t\t\t\t\t\terror.response.statusText\r\n\t\t\t\t\t\t} Data: ${JSON.stringify(error.response.data)} `,\r\n\t\t\t\t\t\t'error',\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (error.code === 'ECONNABORTED') {\r\n\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t`[ Adapter V:${this.version} detailRequest axios:${axios.VERSION} ] error.code: ${error.code} Message: ${error.message}`,\r\n\t\t\t\t\t\t'error',\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn error;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t`[ Adapter V:${this.version} detailRequest axios:${axios.VERSION} ] Error: ${error} Error Code ${error.code} Error Message ${error.message} >>> Stack: ${error.stack}`,\r\n\t\t\t\t\t\t'error',\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @description Is called if a subscribed state changes\r\n\t */\r\n\tprivate async onStateChange(id: string, state: ioBroker.State | null | undefined): Promise<void> {\r\n\t\ttry {\r\n\t\t\tif (state) {\r\n\t\t\t\tif (id === `${this.namespace}.stations.refresh`) {\r\n\t\t\t\t\tif (state.val && !state.ack) {\r\n\t\t\t\t\t\t// set refresh to timeout to 1min to prevent multiple refreshes\r\n\t\t\t\t\t\tif (!this.refreshTimeout) {\r\n\t\t\t\t\t\t\tthis.writeLog(`refresh timeout set to 1min`, 'info');\r\n\t\t\t\t\t\t\tthis.refreshTimeout = setTimeout(async () => {\r\n\t\t\t\t\t\t\t\tthis.writeLog(`refresh again possible`, 'info');\r\n\t\t\t\t\t\t\t\tthis.refreshTimeout = null;\r\n\t\t\t\t\t\t\t\tthis.refreshStatus = false;\r\n\t\t\t\t\t\t\t}, 60000);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!this.refreshStatus) {\r\n\t\t\t\t\t\t\tthis.refreshStatus = true;\r\n\r\n\t\t\t\t\t\t\tthis.writeLog('manuel refresh the data from tankerkoenig.de', 'info');\r\n\t\t\t\t\t\t\tawait this.setStateAsync(`stations.adapterStatus`, {\r\n\t\t\t\t\t\t\t\tval: 'manuel request',\r\n\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tawait this.requestData();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.writeLog(\r\n\t\t\t\t\t\t\t\t'too short time between manual refreshes, manual request is allowed only once per min.',\r\n\t\t\t\t\t\t\t\t'warn',\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tawait this.setStateAsync(`stations.adapterStatus`, {\r\n\t\t\t\t\t\t\t\tval: 'request timeout 1min',\r\n\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (this.refreshStatusTimeout) clearTimeout(this.refreshStatusTimeout);\r\n\t\t\t\t\t\t\tthis.refreshStatusTimeout = setTimeout(async () => {\r\n\t\t\t\t\t\t\t\tawait this.setStateAsync(`stations.adapterStatus`, {\r\n\t\t\t\t\t\t\t\t\tval: 'idle',\r\n\t\t\t\t\t\t\t\t\tack: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}, 10000);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tthis.writeLog(\r\n\t\t\t\t`[ Adapter V:${this.version} onStateChange ID: ${id}] error: ${e} , stack: ${e.stack}`,\r\n\t\t\t\t'error',\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nif (require.main !== module) {\r\n\t// Export the constructor in compact mode\r\n\tmodule.exports = (options: Partial<utils.AdapterOptions> | undefined) => new Tankerkoenig(options);\r\n} else {\r\n\t// otherwise start the instance directly\r\n\t(() => new Tankerkoenig())();\r\n}\r\n"],
  "mappings": "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",
  "names": ["sourceMapSupport", "axios", "station"]
}
